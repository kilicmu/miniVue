{"version":3,"file":"vue.js","sources":["../src/shared/contants.js","../src/utils.js","../src/global-api/mixin.js","../src/global-api/index.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/compiler/parser-html.js","../src/compiler/index.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/create-element.js","../src/render.js","../src/index.js"],"sourcesContent":["export const LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n  'activated',\r\n  'deactivated',\r\n  'errorCaptured',\r\n  'serverPrefetch'\r\n]","import { LIFECYCLE_HOOKS } from \"./shared/contants\";\r\n\r\nexport function isObject (data) {\r\n  return typeof data === \"object\" && data !== null;\r\n}\r\n\r\nexport function proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get () {\r\n      return vm[ source ][ key ];\r\n    },\r\n    set (newValue) {\r\n      vm[ source ][ key ] = newValue;\r\n    }\r\n  })\r\n}\r\nconst strategy = {}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strategy[ hook ] = mergeHook;\r\n})\r\nfunction mergeHook (parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal);\r\n    } else {\r\n      return [ childVal ];\r\n    }\r\n  } else {\r\n    return parentVal;\r\n  }\r\n}\r\n\r\nexport function mergeOptions (parent, child) {\r\n  const options = {};\r\n  function mergeField (key) {\r\n    if (strategy[ key ]) {\r\n      return options[ key ] = strategy[ key ](parent[ key ], child[ key ]);\r\n    }\r\n    if (typeof parent[ key ] === 'object' && typeof child[ key ] === 'object') {\r\n      options[ key ] = {\r\n        ...parent[ key ],\r\n        ...child[ key ]\r\n      }\r\n    } else if (child[ key ] == null) {\r\n      options[ key ] = parent[ key ];\r\n    } else {\r\n      options[ key ] = child[ key ];\r\n    }\r\n    return options\r\n  }\r\n  for (const key in parent) {\r\n    mergeField(key);\r\n  }\r\n\r\n  for (const key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  return options\r\n}","import { mergeOptions } from \"../utils\";\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  }\r\n\r\n  Vue.mixin({\r\n    b: 2,\r\n    beforeCreate () {\r\n      console.log(this.object);\r\n    },\r\n    mounted () {\r\n      console.log('obj', this.object);\r\n      console.log(this);\r\n    },\r\n  });\r\n\r\n  Vue.mixin({\r\n    a: 1,\r\n    beforeCreate () {\r\n      console.log(2);\r\n    },\r\n  });\r\n\r\n  console.log(Vue.options)\r\n}","import { initMixin } from \"./mixin\";\r\n\r\nexport function initGlobalAPI (Vue) {\r\n  Vue.options = {}\r\n  initMixin(Vue);\r\n\r\n\r\n}","\r\n\r\nconst oldArrayMethods = Array.prototype;\r\n\r\nconst methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reverse',\r\n  'splice'\r\n]\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods);\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[ method ] = function (...args) {\r\n    const ret = oldArrayMethods[ method ].apply(this, args);\r\n    const ob = this.__ob__;\r\n    let inserted;\r\n\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case 'splice': // splice方法的第三个参数才是插入的值\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    inserted && ob.observeArray(inserted);\r\n    return ret;\r\n  }\r\n})","let uid = 0\r\n\r\nexport default class Dep {\r\n  constructor () {\r\n    this.id = uid++\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice()\r\n    subs.forEach(watcher => {\r\n      watcher.update();\r\n    })\r\n  }\r\n}\r\n\r\n//这个target是为了获取依赖的Watcher\r\nDep.target = null;\r\nconst targetStack = []\r\nexport function pushTarget (watcher) {\r\n  Dep.target = watcher;\r\n  targetStack.push(watcher);\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[ targetStack.length - 1 ]\r\n}","import { isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\nclass Observer {\r\n  constructor (data) {\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false,\r\n      configurable: false\r\n    })\r\n    // 不需要对数组索引进行拦截\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods;\r\n\r\n    } else {\r\n      this.walk(data); //对数据分步处理\r\n    }\r\n  }\r\n\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[ key ]); // 定义响应式变化\r\n    })\r\n  }\r\n\r\n  observeArray (data) {\r\n    for (const i in data) {\r\n      observe(data[ i ]);   // 解决数组内对象的响应式\r\n    }\r\n  }\r\n}\r\n\r\nfunction defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value);\r\n  // debugger\r\n  // if (data.__ob__ instanceof Observer) {\r\n  //   return;\r\n  // }\r\n  Object.defineProperty(data, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newValue) {\r\n      if (newValue === value) return;\r\n      observe(value)\r\n      console.log(\"set value: \", newValue)\r\n      value = newValue;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\nexport function observe (data) {\r\n  // TODO对数据监控\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  // 对data数据做definePropert\r\n  return new Observer(data);\r\n}","import { observe } from \"./observer/index\";\r\nimport { isObject } from \"./utils\";\r\nimport { proxy } from \"./utils\";\r\n\r\nexport function initState (vm) {\r\n  const opts = vm.$options;\r\n  if (opts.props) {\r\n    initProps(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethod(vm);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  // compouted\r\n}\r\n\r\n\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\r\n  // 对数据进行观测\r\n  for (const key in data) {\r\n    proxy(vm, '_data', key);\r\n  }\r\n  observe(data);\r\n}\r\n\r\nfunction initProps (vm) {\r\n\r\n}\r\n\r\nfunction initMethods (vm) {\r\n\r\n}\r\n","//\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //<a:a>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配结尾的</div>\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\n\r\nlet root = null; // ast语法树树根\r\nlet currentParent; // 标识当前父亲\r\nconst stack = [];\r\nconst ELEMENT_TYPE = 1;\r\nconst TEXT_TYPE = 3;\r\n\r\nfunction createASTElement (tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: ELEMENT_TYPE,\r\n    children: [],\r\n    attrs,\r\n    parent: null\r\n  }\r\n}\r\n// <div><p></p></div>\r\n\r\nexport function parseHTML (html) {\r\n\r\n  function start (tagName, attrs) {\r\n    let element = createASTElement(tagName, attrs);\r\n    if (!root) {\r\n      root = element;\r\n    }\r\n    currentParent = element; // 把当前元素标记为父AST\r\n    stack.push(element);\r\n  }\r\n\r\n  function end (tagName) {\r\n    let element = stack.pop();\r\n    currentParent = stack[ stack.length - 1 ];\r\n    if (currentParent) {\r\n      element.parent = currentParent;\r\n      currentParent.children.push(element);\r\n    }\r\n  }\r\n\r\n  function chars (text) {\r\n    text = text.replace(/\\s/g, '');\r\n    if (text) {\r\n      currentParent.children.push({\r\n        text,\r\n        type: TEXT_TYPE,\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  // 使用正则解析\r\n  // 不断截取html字符串，对截取内容解析\r\n  while (html) {\r\n    let textEnd = html.indexOf('<');\r\n    if (textEnd == 0) {\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n      }\r\n      const endTagMatch = html.match(endTag);\r\n      if (endTagMatch) {\r\n        end(endTagMatch[ 1 ]);\r\n        advance(endTagMatch[ 0 ].length)\r\n      }\r\n    }\r\n\r\n    let text;\r\n    if (textEnd >= 0) {\r\n      text = html.substring(0, textEnd); // 文本内容截取\r\n    }\r\n    if (text) {\r\n      chars(text);\r\n      advance(text.length);\r\n    }\r\n    if (textEnd < 0) {\r\n      break;\r\n    }\r\n  }\r\n\r\n\r\n  function parseStartTag () {\r\n    const start = html.match(startTagOpen);\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[ 1 ],\r\n        attrs: []\r\n      }\r\n      advance(start[ 0 ].length);\r\n      let end, attr;\r\n\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        match.attrs.push({ \"name\": attr[ 1 ], \"value\": attr[ 3 ] || attr[ 4 ] || attr[ 5 ] })\r\n        advance(attr[ 0 ].length);\r\n      }\r\n      if (end) {\r\n        advance(end[ 0 ].length)\r\n        return match;\r\n      }\r\n    }\r\n  }\r\n\r\n  function advance (n) {\r\n    html = html.substring(n);\r\n  }\r\n\r\n  return root;\r\n}","import { parseHTML } from \"./parser-html\";\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配动态变量的+？\r\nfunction genProps (attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    const attr = attrs[ i ];\r\n    if (attr.name === 'style') {\r\n      const obj = {};\r\n      attr.value.split(\";\").forEach(item => {\r\n        const [ key, value ] = item.split(\":\");\r\n        obj[ key ] = value;\r\n      })\r\n      attr.value = obj;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n  }\r\n  return str;\r\n}\r\n\r\nfunction genChildren (el) {\r\n  let children = el;\r\n  if (children && children.length > 0) {\r\n    return `${children.map(c => gen(c)).join(',')}`\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction gen (node) {\r\n  if (node.type === 1) {\r\n    // 元素\r\n    return generate(node);\r\n  } else { // 文本\r\n    // 正则 lastIndex问题\r\n    let text = node.text;\r\n    let tokens = [];\r\n    let match, index;\r\n    let lastIndex = defaultTagRE.lastIndex = 0;\r\n    while (match = defaultTagRE.exec(text)) {\r\n      index = match.index;\r\n      if (index > lastIndex) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)));\r\n      }\r\n      tokens.push(`_s(${match[ 1 ].trim()})`);\r\n      lastIndex = index + match[ 0 ].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n    return `_v(${tokens.join('+')})`;\r\n  }\r\n}\r\n\r\nfunction generate (el) {\r\n  const children = genChildren(el.children);// 子节点\r\n\r\n  let code = `_c(\"${el.tag}\",{${el.attrs.length ? genProps(el.attrs) : 'undefined'}}\r\n  ${children ? `,${children}` : ''})\r\n  `\r\n  return code\r\n}\r\n\r\nexport function compileToFunction (template) {\r\n  // 编译模板为render函数\r\n\r\n  // 1. 将代码-》ast语法树 paser解析\r\n  const root = parseHTML(template);\r\n  // console.log(root);\r\n  // 将AST语法树生成Render函数\r\n  let code = generate(root);\r\n\r\n  code = `with(this){ return ${code}}`\r\n\r\n  let renderFn = new Function(code);\r\n  return renderFn;\r\n  // 2. 标记静态书 markup解析\r\n\r\n  // 3. 通过ast产生的语法树，生成render函数 render（codegen）\r\n}","import { popTarget, pushTarget } from \"./dep\";\r\n\r\nexport class Watcher {\r\n  constructor (vm, exprOrFn, cb, options) {\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cb = cb;\r\n    this.options = options;\r\n\r\n    this.getter = exprOrFn;\r\n    this.get();\r\n  }\r\n\r\n  get () {\r\n    const vm = this.vm\r\n    pushTarget(this);\r\n    this.getter.call(vm);\r\n    popTarget();\r\n  }\r\n\r\n  addDep (dep) {\r\n    const id = dep.id;\r\n    dep.addSub(this);\r\n  }\r\n\r\n  update () {\r\n    this.get();\r\n  }\r\n\r\n}","export function patch (oldVnode, vnode) {\r\n  const isRealElement = oldVnode.nodeType;\r\n  if (isRealElement) {\r\n    const oldElm = oldVnode;\r\n    const parentElm = oldElm.parentNode;\r\n    const el = createElm(vnode);\r\n    parentElm.insertBefore(el, oldElm);\r\n    parentElm.removeChild(oldElm);\r\n    return el;\r\n  }\r\n}\r\n\r\nfunction createElm (vnode) {\r\n  const { tag, children, key, data, text } = vnode;\r\n  if (typeof tag === 'string') {\r\n    vnode.el = document.createElement(tag);\r\n    updatePrototies(vnode);\r\n    children.forEach(child => {\r\n      return vnode.el.appendChild(createElm(child))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\nfunction updatePrototies (vnode) {\r\n  const newProps = vnode.data || {};\r\n\r\n  const el = vnode.el;\r\n  for (const key in newProps) {\r\n    if (key === 'style') {\r\n      for (const styleName in newProps.style) {\r\n        el.style[ styleName.trim() ] = newProps.style[ styleName ]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps.class;\r\n    } else if (key !== 'undefined') {\r\n      el.setAttribute(key, newProps[ key ]);\r\n    }\r\n  }\r\n}","import { Watcher } from \"./observer/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\nexport function mountComponent (vm, el) {\r\n  const opts = vm.$options;\r\n  vm.$el = el;\r\n  callHook(vm, 'beforeMount');\r\n  const updateComponent = function () {\r\n    // 1. 通过_render方法生成虚拟dom\r\n    // 2. _update方法通过vnode生成真实dom\r\n    vm._update(vm._render());\r\n  }\r\n  // 通过生成Watcher达成首次渲染\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n  callHook(vm, 'mounted');\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    // vm.$el = patch(vm.$el, vnode);\r\n    vm.$el = patch(vm.$el, vnode);\r\n  }\r\n}\r\n\r\nexport function callHook (vm, hook) {\r\n  const handlers = vm.$options[ hook ];\r\n  if (handlers) {\r\n    handlers.forEach(i => i.call(vm));\r\n  }\r\n}","import { initState } from \"./state\"\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\"\r\nimport { initGlobalAPI } from \"./global-api/index\"\r\nimport { mergeOptions } from \"./utils\";\r\n\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    //Vue的内部属性#options 用户传递所以参数\r\n    const vm = this;\r\n    vm.$options = mergeOptions(vm.constructor.options, options);\r\n    callHook(vm, 'beforeCreate');\r\n    initState(vm); // 初始化状态\r\n\r\n    callHook(vm, 'created');\r\n\r\n    // 通过模板渲染\r\n\r\n    if (vm.$options.el) { // 用户提供挂载节点\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    el = document.querySelector(el);\r\n    const vm = this;\r\n    // 同时存在template与render使用render，如果没有则使用id=“app”的模板\r\n    // 将template转换为render函数挂载到opts上\r\n    const opts = this.$options;\r\n\r\n    if (!opts.render) { // 如果没有render，则编译模板\r\n      let template = opts.template;\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      const render = compileToFunction(template);\r\n      opts.render = render;\r\n    }\r\n    //  opts.render;\r\n    mountComponent(vm, el);\r\n  }\r\n}","export function createElement (tag, data, ...children) {\r\n  let { key } = data;\r\n  if (key) {\r\n    delete data[ key ];\r\n  }\r\n  return vnode(tag, data, key, children, undefined);\r\n}\r\n\r\nexport function createTextNode (text) {\r\n  return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction vnode (tag, data, key, children, text) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text\r\n  }\r\n}","import { createElement, createTextNode } from \"./vdom/create-element\";\r\nexport function renderMixin (Vue) {\r\n  // 获取VNode\r\n  // _c创建元素虚拟节点\r\n  Vue.prototype._c = function () {\r\n    return createElement(...arguments);\r\n  }\r\n  // _a 创建文本虚拟节点\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(text)\r\n  }\r\n  // _s JSOM.stringify();\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val);\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    const { render } = vm.$options\r\n    const vnode = render.call(vm);\r\n    return vnode;\r\n  }\r\n}","import { initGlobalAPI } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\"\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { renderMixin } from \"./render\";\r\n\r\nfunction Vue (options) {\r\n  // 初始化操作\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\ninitGlobalAPI(Vue);\r\n\r\n\r\nexport default Vue;"],"names":["LIFECYCLE_HOOKS","isObject","data","proxy","vm","source","key","Object","defineProperty","get","set","newValue","strategy","forEach","hook","mergeHook","parentVal","childVal","concat","mergeOptions","parent","child","options","mergeField","hasOwnProperty","initMixin","Vue","mixin","b","beforeCreate","console","log","object","mounted","a","initGlobalAPI","oldArrayMethods","Array","prototype","methods","arrayMethods","create","method","args","ret","apply","ob","__ob__","inserted","slice","observeArray","uid","Dep","id","subs","sub","push","target","addDep","watcher","update","targetStack","pushTarget","popTarget","pop","length","Observer","value","enumerable","configurable","isArray","__proto__","walk","keys","defineReactive","i","observe","dep","depend","notify","initState","opts","$options","props","initMethod","initData","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","stack","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","parseHTML","html","start","element","end","chars","text","replace","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","attr","n","defaultTagRE","genProps","str","name","obj","split","item","JSON","stringify","genChildren","el","map","c","gen","join","node","generate","tokens","index","lastIndex","exec","trim","code","compileToFunction","template","renderFn","Function","Watcher","exprOrFn","cb","getter","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","removeChild","document","createElement","updatePrototies","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","mountComponent","$el","callHook","updateComponent","_update","_render","lifecycleMixin","handlers","_init","constructor","$mount","querySelector","render","outerHTML","undefined","renderMixin","_c","arguments","_v","_s","val"],"mappings":"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"}