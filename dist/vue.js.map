{"version":3,"file":"vue.js","sources":["../utils/next-tick.js","../src/shared/contants.js","../src/global-api/assets.js","../src/utils.js","../src/global-api/extend.js","../src/global-api/mixin.js","../src/global-api/index.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/state.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/vdom/vnode.js","../src/vdom/create-component.js","../src/vdom/create-element.js","../src/render.js","../src/compiler/jsx-parser.js","../src/compiler/evalJSX.js","../src/init.js","../src/index.js"],"sourcesContent":["const callbacks = []\r\n\r\nlet pending = false;\r\nconst p = Promise.resolve();\r\n/**\r\n * 清空callbacks\r\n */\r\nfunction flushCallbacks () {\r\n  pending = false;\r\n  const copies = callbacks.slice(0);\r\n  callbacks.length = 0;\r\n  copies.forEach(copies => {\r\n    copies();\r\n  })\r\n}\r\n\r\nfunction timerFunc () {\r\n  p.then(flushCallbacks);\r\n}\r\n\r\nexport function nextTick (cb, ctx) {\r\n  let _resolve;\r\n  callbacks.push(() => {\r\n    if (cb) {\r\n      cb.call(ctx);\r\n    } else if (_resolve) {\r\n      _resolve(ctx);\r\n    }\r\n  })\r\n\r\n  if (!pending) {\r\n    pending = true;\r\n    timerFunc();\r\n  }\r\n\r\n  if (!cb && typeof Promise !== 'undefined') {\r\n    return new Promise(resolve => {\r\n      _resolve = resolve;\r\n    })\r\n  }\r\n\r\n}","export const LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n  'activated',\r\n  'deactivated',\r\n  'errorCaptured',\r\n  'serverPrefetch'\r\n]\r\n\r\n\r\nexport const ASSET_TYPES = [\r\n  'component',\r\n  'directive',\r\n  'filter'\r\n]","import { ASSET_TYPES } from \"../shared/contants\";\r\n\r\nexport function initAssetRegisters (Vue) {\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue[ type ] = function (id, definition) {\r\n      if (type === 'component') {\r\n        definition = this.options._base.extend(definition);\r\n      } else if (type === 'filter') {\r\n\r\n      } else if (type === 'directive') {\r\n\r\n      }\r\n      this.options[ type + 's' ][ id ] = definition;\r\n    }\r\n  })\r\n}","import { LIFECYCLE_HOOKS } from \"./shared/contants\";\r\n\r\nexport function isObject (data) {\r\n  return typeof data === \"object\" && data !== null;\r\n}\r\n\r\nexport function proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get () {\r\n      return vm[ source ][ key ];\r\n    },\r\n    set (newValue) {\r\n      vm[ source ][ key ] = newValue;\r\n    }\r\n  })\r\n}\r\nconst strategy = {}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strategy[ hook ] = mergeHook;\r\n})\r\nfunction mergeHook (parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal);\r\n    } else {\r\n      return [ childVal ];\r\n    }\r\n  } else {\r\n    return parentVal;\r\n  }\r\n}\r\n\r\nstrategy[ 'components' ] = function (parentVal, childVal) {\r\n\r\n  const res = Object.create(parentVal);\r\n  if (childVal) {\r\n    for (let key in childVal) {\r\n      res[ key ] = childVal[ key ];\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function mergeOptions (parent, child) {\r\n  const options = {};\r\n  function mergeField (key) {\r\n    if (strategy[ key ]) {\r\n      // debugger\r\n      return options[ key ] = strategy[ key ](parent[ key ], child[ key ]);\r\n    }\r\n    if (typeof parent[ key ] === 'object' && typeof child[ key ] === 'object') {\r\n      options[ key ] = {\r\n        ...parent[ key ],\r\n        ...child[ key ]\r\n      }\r\n    } else if (child[ key ] == null) {\r\n      options[ key ] = parent[ key ];\r\n    } else {\r\n      options[ key ] = child[ key ];\r\n    }\r\n    return options\r\n  }\r\n  for (const key in parent) {\r\n    mergeField(key);\r\n  }\r\n\r\n  for (const key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\n\r\nexport function isReservedTag (tag) {\r\n  const str = 'input,div,ul,li,span,p';\r\n  const obj = {}\r\n  str.split(',').forEach(key => {\r\n    obj[ key ] = true\r\n  })\r\n  return !!obj[ tag ];\r\n}\r\n\r\n","import { mergeOptions } from \"../utils\";\r\n\r\nexport function initExtend (Vue) {\r\n  Vue.extend = function (extendOptions) {\r\n    let cid = 0;\r\n    const Sub = function VueComponent (options) {\r\n      this._init(options);\r\n    }\r\n\r\n    Sub.prototype = Object.create(this.prototype);\r\n    Sub.prototype.constructor = Sub;\r\n    Sub.cid = ++cid;\r\n    Sub.options = mergeOptions(this.options, extendOptions);\r\n    return Sub;\r\n  }\r\n}","import { mergeOptions } from \"../utils\";\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  }\r\n}","import { nextTick } from \"../../utils/next-tick\";\r\nimport { ASSET_TYPES } from \"../shared/contants\";\r\nimport { initAssetRegisters } from \"./assets\";\r\nimport { initExtend } from \"./extend\";\r\nimport { initMixin } from \"./mixin\";\r\n\r\n\r\nexport function initGlobalAPI (Vue) {\r\n  Vue.options = {}\r\n  initMixin(Vue);\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue.options[ type + 's' ] = {}\r\n  })\r\n  Vue.options._base = Vue;\r\n  initExtend(Vue);\r\n  initAssetRegisters(Vue);\r\n\r\n}","\r\n\r\nconst oldArrayMethods = Array.prototype;\r\n\r\nconst methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reverse',\r\n  'splice'\r\n]\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods);\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[ method ] = function (...args) {\r\n    const ret = oldArrayMethods[ method ].apply(this, args);\r\n    const ob = this.__ob__;\r\n    let inserted;\r\n\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case 'splice': // splice方法的第三个参数才是插入的值\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    inserted && ob.observeArray(inserted);\r\n    return ret;\r\n  }\r\n})","let uid = 0\r\n\r\nexport default class Dep {\r\n  constructor () {\r\n    this.id = uid++\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice()\r\n    subs.forEach(watcher => {\r\n      watcher.update();\r\n    })\r\n  }\r\n}\r\n\r\n//这个target是为了获取依赖的Watcher\r\nDep.target = null;\r\nconst targetStack = []\r\nexport function pushTarget (watcher) {\r\n  Dep.target = watcher;\r\n  targetStack.push(watcher);\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[ targetStack.length - 1 ]\r\n}","import { isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\nclass Observer {\r\n  constructor (data) {\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false,\r\n      configurable: false\r\n    })\r\n    // 不需要对数组索引进行拦截\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods;\r\n\r\n    } else {\r\n      this.walk(data); //对数据分步处理\r\n    }\r\n  }\r\n\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[ key ]); // 定义响应式变化\r\n    })\r\n  }\r\n\r\n  observeArray (data) {\r\n    for (const i in data) {\r\n      observe(data[ i ]);   // 解决数组内对象的响应式\r\n    }\r\n  }\r\n}\r\n\r\nexport function defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value);\r\n  // debugger\r\n  // if (data.__ob__ instanceof Observer) {\r\n  //   return;\r\n  // }\r\n  Object.defineProperty(data, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newValue) {\r\n      if (newValue === value) return;\r\n      observe(value)\r\n      value = newValue;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\nexport function observe (data) {\r\n  // TODO对数据监控\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  // 对data数据做definePropert\r\n  return new Observer(data);\r\n}","import { observe, defineReactive } from \"./observer/index\";\r\nimport { isObject } from \"./utils\";\r\nimport { proxy } from \"./utils\";\r\n\r\nexport function initState (vm) {\r\n  const opts = vm.$options;\r\n  console.log(opts);\r\n  if (opts.props) {\r\n    initProps(vm, opts.props);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm, opts.methods);\r\n  }\r\n\r\n  // compouted\r\n  // watch\r\n  if (opts.watch) {\r\n    initWatch(vm, opts.watch);\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === 'function' ? data.call(vm) : data;\r\n  // 对数据进行观测\r\n  for (const key in data) {\r\n    proxy(vm, '_data', key);\r\n  }\r\n  observe(data);\r\n}\r\n\r\nfunction initProps (vm, propsOptions) {\r\n  const propsData = vm.$options.propsData\r\n  const props = vm._props = {}\r\n  const keys = vm.$props._propKeys = [];\r\n  for (const key in propsOptions) {\r\n    keys.push(key);\r\n    const value = props.value;\r\n    defineReactive(props, key, value);\r\n\r\n    if (!(key in vm)) {\r\n      proxy(vm, `_props`, key)\r\n    }\r\n  }\r\n\r\n}\r\n\r\nfunction initMethods (vm, methods) {\r\n  const porps = vm.$options.props;\r\n  for (const key in methods) {\r\n    vm[ key ] = typeof methods[ key ] !== 'function' ? function () { } : methods[ key ].bind(vm);\r\n  }\r\n}\r\n\r\nfunction initWatch (vm, watch) {\r\n  for (const key in watch) {\r\n    const handler = watch[ key ]\r\n    if (Array.isArray[ handler ]) {\r\n      for (let h of handler) {\r\n        createWatcher(vm, key, h);\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher (vm, expOrFn, handler, options) {\r\n  if (typeof handler === 'object') {\r\n    options = handler;\r\n    handler = options.handler;\r\n  }\r\n  if (typeof handler === 'string') {\r\n    handler = vm[ handler ];\r\n  }\r\n\r\n  return vm.$watch(expOrFn, handler, options);\r\n}\r\n\r\nexport function stateMixin (Vue) {\r\n  const dataDef = {}\r\n  dataDef.get = function () { return this._data }\r\n  const propsDef = {}\r\n  propsDef.get = function () { return this._props }\r\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\r\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\r\n}\r\n","import { nextTick } from \"../../utils/next-tick\";\r\n\r\nlet has = {};\r\nlet flushing = false;\r\nlet queue = [];\r\n\r\nfunction flushSchedulerQueue () {\r\n  queue.forEach(watcher => {\r\n    watcher.run();\r\n\r\n  })\r\n  has = {};\r\n  queue = [];\r\n}\r\n\r\nexport function queueWatcher (watcher) {\r\n\r\n  const id = watcher.id;\r\n  if (has[ id ] == null) {\r\n    has[ id ] = true;\r\n    if (!flushing) {\r\n      queue.push(watcher)\r\n    }\r\n    nextTick(flushSchedulerQueue, this);\r\n  }\r\n}","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./scheduler\";\r\nlet id = 0;\r\nexport class Watcher {\r\n  constructor (vm, exprOrFn, cb, options) {\r\n    this.id = id++;\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.user = options.user; // 判断是否是$watch创造的 watcher\r\n    console.log(this.user);\r\n    if (typeof exprOrFn === \"string\") {\r\n      this.getter = function () {\r\n        const path = exprOrFn.split('.');\r\n        let obj = vm;\r\n        for (let p of path) {\r\n          obj = obj[ p ];\r\n        }\r\n        return obj;\r\n      }\r\n    } else {\r\n      this.getter = exprOrFn;\r\n    }\r\n\r\n    this.value = this.get();\r\n  }\r\n\r\n  get () {\r\n    const vm = this.vm\r\n    pushTarget(this);\r\n    const value = this.getter.call(vm);\r\n    popTarget();\r\n    return value;\r\n  }\r\n\r\n  addDep (dep) {\r\n    const id = dep.id;\r\n    dep.addSub(this);\r\n  }\r\n\r\n  update () {\r\n    queueWatcher(this);\r\n\r\n  }\r\n\r\n  run () {\r\n    const newVal = this.get();\r\n    const oldVal = this.value;\r\n    this.value = newVal;\r\n    console.log(this.user);\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newVal, oldVal)\r\n    }\r\n  }\r\n\r\n}","function sameVnode (a, b) {\r\n  return (\r\n    a.key === b.key && (\r\n      a.tag === b.tag\r\n    )\r\n  )\r\n}\r\n\r\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\r\n  let i, key;\r\n  const map = {}\r\n  for (i = beginIdx; i <= endIdx; ++i) {\r\n    key = children[ i ].key\r\n\r\n    map[ key ] = i;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function patch (oldVnode, vnode) {\r\n  if (!oldVnode) {\r\n    return createElm(vnode);\r\n  } else {\r\n    const isRealElement = oldVnode.nodeType;\r\n    if (isRealElement) { // 若oldVnode是一个真实节点，首渲染\r\n      const oldElm = oldVnode;\r\n      const parentElm = oldElm.parentNode;\r\n      const el = createElm(vnode);\r\n      parentElm.insertBefore(el, oldElm);\r\n      parentElm.removeChild(oldElm);\r\n      return el;\r\n    } else {\r\n      if (oldVnode.tag !== vnode.tag) {\r\n        const el = oldVnode.el; // 获取真实节点\r\n        oldVnode.el = el.parentNode.replaceChild(createElm(vnode), el);\r\n      }\r\n\r\n      if (!oldVnode.tag) {\r\n        if (oldVnode.text !== vnode.text) {\r\n          oldVnode.el.textContent = vnode.text;\r\n        }\r\n      }\r\n\r\n      const el = vnode.el = oldVnode.el;\r\n      updatePrototies(vnode, oldVnode);\r\n\r\n      const oldChildren = oldVnode?.children ?? [];\r\n      const newChildren = vnode?.children ?? [];\r\n      if (oldChildren.length && newChildren.length) {\r\n        updateChildren(el, oldChildren, newChildren)\r\n      } else if (newChildren.length > 0) {\r\n        for (let child of newChildren) {\r\n          el.appendChild(createElm(child));\r\n        }\r\n      } else if (oldChildren.length > 0) {\r\n        el.innerHTML = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction updateChildren (parentElm, oldChildren, newChildren) {\r\n  let oldKeyToIdx;\r\n\r\n  let oldStartIndex = 0,\r\n    oldStartVnode = oldChildren[ oldStartIndex ],\r\n    oldEndIndex = oldChildren.length - 1,\r\n    oldEndVnode = oldChildren[ oldEndIndex ];\r\n\r\n  let newStartIndex = 0,\r\n    newStartVnode = newChildren[ newStartIndex ],\r\n    newEndIndex = newChildren.length - 1,\r\n    newEndVnode = newChildren[ newEndIndex ];\r\n  // debugger\r\n  while (newStartIndex <= newEndIndex && oldStartIndex <= oldEndIndex) {\r\n    if (!oldStartVnode) {\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n    } else if (!oldEndVnode) {\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n    }\r\n    if (sameVnode(oldStartVnode, newStartVnode)) {\r\n      console.log(oldStartVnode, newStartVnode)\r\n      patch(oldStartVnode, newStartVnode); // 复用\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n      patch(oldEndVnode, newEndVnode);\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n      newEndVnode = newChildren[ --newEndIndex ];\r\n    } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n      patch(oldStartVnode, newEndVnode);\r\n      parentElm.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n      newEndVnode = newChildren[ --newEndIndex ];\r\n    } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n      // debugger\r\n      patch(oldEndVnode, newStartVnode);\r\n      parentElm.insertBefore(oldEndVnode.el, oldStartVnode.el);\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    } else { // 乱序\r\n      // 通过老key做映射表\r\n      // 在映射表如果有当前newVnode则将那个node移动到oldEndVnode前面\r\n      // 如果没有则新建一个newVnode的节点然后吧这个节点插入到startVnode前\r\n      if (!oldKeyToIdx) oldKeyToIdx = createKeyToOldIdx(oldChildren, oldStartIndex, oldEndIndex);\r\n      let idxInOld = oldKeyToIdx[ newStartVnode.key ]\r\n      if (!idxInOld) {\r\n\r\n        parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.el);\r\n      } else {\r\n        const vnodeToMove = oldChildren[ idxInOld ];\r\n        oldChildren[ idxInOld ] = undefined;\r\n        console.log(\"-------\", oldStartVnode);\r\n        parentElm.insertBefore(vnodeToMove.el, oldStartVnode.el);\r\n        patch(vnodeToMove, newStartVnode);\r\n      }\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    }\r\n  }\r\n\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; ++i) {\r\n      // parentElm.appendChild(createElm(newChildren[ i ]));\r\n      const el = newChildren[ newEndIndex + 1 ]?.el ?? null;\r\n      // console.log('----', el, newChildren[ i ]);\r\n      parentElm.insertBefore(createElm(newChildren[ i ]), el);\r\n    }\r\n  }\r\n\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; ++i) {\r\n      const child = oldChildren[ i ];\r\n      if (child != undefined) {\r\n        parentElm.removeChild(child.el);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function createElm (vnode) {\r\n  const { tag, children, key, data, text } = vnode;\r\n  if (typeof tag === 'string') {\r\n    // TODO 组件判断\r\n    if (createComponent(vnode)) {\r\n      // console.log('el -----------------', vnode.el);\r\n      return vnode.el = vnode.componentInstance.$el;\r\n    }\r\n    vnode.el = document.createElement(tag);\r\n    updatePrototies(vnode);\r\n    children.forEach(child => {\r\n      return vnode.el.appendChild(createElm(child))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\nfunction createComponent (vnode) {\r\n  console.log('component-vnode------------', vnode)\r\n  let d = vnode.data;\r\n  d.hooks && d.hooks.init && d.hooks.init(vnode)\r\n  // if ((d = d.hooks) && (d = d.init)) {\r\n  //   d(vnode);\r\n  // }\r\n  if (vnode.componentInstance) {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction updatePrototies (vnode, oldVnode) {\r\n  const newProps = vnode.data || {};\r\n  const el = vnode.el;\r\n  // console.log('____', newProps.onClick())\r\n  if (oldVnode) {\r\n    const oldProps = oldVnode.data || {};\r\n    // 处理style\r\n    const oldStyle = oldProps.style ?? {};\r\n    const newStyle = newProps.style ?? {};\r\n\r\n    for (let key in oldStyle) {\r\n      if (!newStyle[ key ]) el.style[ key ] = ''\r\n    }\r\n\r\n    for (let key in oldProps) {\r\n      if (!newProps[ key ]) {\r\n        el.removeAttribute(key);\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const key in newProps) {\r\n    if (key === 'style') {\r\n      for (const styleName in newProps.style) {\r\n        el.style[ styleName.trim() ] = newProps.style[ styleName ]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps.class;\r\n    } else if (key.startsWith('on')) {\r\n      const event = key.toLowerCase();\r\n      console.log();\r\n      el[ event ] = newProps[ key ];\r\n    } else if (key !== 'undefined') {\r\n      el.setAttribute(key, newProps[ key ]);\r\n    }\r\n  }\r\n}","import { Watcher } from \"./observer/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\nexport function mountComponent (vm, el) {\r\n  const opts = vm.$options;\r\n  vm.$el = el;\r\n  callHook(vm, 'beforeMount');\r\n  const updateComponent = function () {\r\n    callHook(vm, 'beforeUpdate');\r\n    // 1. 通过_render方法生成虚拟dom\r\n    // 2. _update方法通过vnode生成真实dom\r\n    vm._update(vm._render());\r\n    callHook(vm, 'updated');\r\n  }\r\n  // 通过生成Watcher达成首次渲染\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n  callHook(vm, 'mounted');\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    // vm.$el = patch(vm.$el, vnode);\r\n    const prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode);\r\n    }\r\n  }\r\n}\r\n\r\nexport function callHook (vm, hook) {\r\n  const handlers = vm.$options[ hook ];\r\n  if (handlers) {\r\n    handlers.forEach(i => i.call(vm));\r\n  }\r\n}","export function vnode (tag, data, key, children, text, componentOptions) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n    componentOptions\r\n  }\r\n}","import { isObject } from \"../utils\";\r\nimport { vnode } from \"./vnode\";\r\n\r\nexport function createComponent (vm, tag, data, key, children, Ctor) {\r\n  if (isObject(Ctor)) {\r\n    Ctor = vm.$options._base.extend(Ctor);\r\n  }\r\n\r\n  data.hooks = {\r\n    init (vnode) {\r\n      const child = vnode.componentInstance = new Ctor({ _isComponent: true })\r\n      child.$mount();\r\n    },\r\n\r\n  }\r\n  return vnode(`vue-component-${Ctor.cid}-${tag}`, data, key, undefined, undefined, { Ctor, children });\r\n}","import { isReservedTag } from \"../utils\";\r\nimport { createComponent } from \"./create-component\";\r\nimport { vnode } from \"./vnode\";\r\n\r\nexport function createElement (vm, tag, data, ...children) {\r\n\r\n  let { key } = data;\r\n  if (key) {\r\n    delete data[ key ];\r\n  }\r\n  console.log('create-------', children);\r\n  if (isReservedTag(tag)) {\r\n    return vnode(tag, data, key, children, undefined);\r\n  } else {\r\n    let Ctor = vm.$options.components[ tag ];\r\n    console.log('createComponent')\r\n    return createComponent(vm, tag, data, key, children, Ctor);\r\n  }\r\n\r\n}\r\n\r\n// $createElement(\"div\", {}, $createElement(\"div\", { \"onClick\": this.handleClick.bind(this) }, $createTextNode(this.name)), $createElement(\"div\", {}, $createTextNode(this.age)))\r\n\r\n// export function createElement (vm, tag, data, ...children) {\r\n//   let { key } = data ? data : { key: undefined };\r\n//   if (key) {\r\n//     delete data[ key ];\r\n//   }\r\n\r\n//   // children = children || []\r\n//   const ch = [];\r\n//   children.forEach(child => {\r\n//     ch.append(createElement(vm, child));\r\n//   })\r\n\r\n//   console.log('ch: ', ch, tag, vm)\r\n//   if (isReservedTag(tag)) {\r\n//     return vnode(tag, data, key, ch, undefined);\r\n//   } else if (tag == null) {\r\n//     return createTextNode(vm, tag);\r\n//   } else {\r\n//     let Ctor = vm.$options.components[ tag ];\r\n//     return createComponent(vm, tag, data, key, children, Ctor);\r\n//   }\r\n// }\r\n\r\nexport function createTextNode (vm, text) {\r\n\r\n  return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n","import { createElement, createTextNode } from \"./vdom/create-element\";\r\nexport function renderMixin (Vue) {\r\n  // 获取VNode\r\n  // _c创建元素虚拟节点\r\n  Vue.prototype._c = function () {\r\n    return createElement(this, ...arguments);\r\n  }\r\n  // _a 创建文本虚拟节点\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(this, text)\r\n  }\r\n  // _s JSOM.stringify();\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val);\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n\r\n    const { render } = vm.$options\r\n    console.log(render);\r\n    const vnode = render.call(vm, vm.$createElement);\r\n\r\n    // console.log('vnode', vnode)\r\n    return vnode;\r\n  }\r\n}\r\n\r\n\r\nexport function initRender (vm) {\r\n  vm.$createElement = (tag, data, ...children) => createElement(vm, tag, data, ...children);\r\n  vm.$createTextNode = (text) => createTextNode(vm, text);\r\n}","function oneObject(str) {\n    var obj = {}\n    str.split(\",\").forEach(_ => obj[_] = true)\n    return obj\n}\nvar voidTag = oneObject(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\")\nvar specalTag = oneObject('xmp,style,script,noscript,textarea,template,#comment')\n\nvar hiddenTag = oneObject('style,script,noscript,template')\n\nvar JSXParser = function(a, f) {\n    if (!(this instanceof JSXParser)) {\n        return parse(a, f)\n    }\n    this.input = a\n    this.getOne = f\n}\nJSXParser.prototype = {\n    parse: function() {\n        return parse(this.input, this.getOne)\n    }\n}\nvar rsp = /\\s/\n    /**\n     * \n     * \n     * @param {any} string \n     * @param {any} getOne 只返回一个节点\n     * @returns \n     */\nfunction parse(string, getOne) {\n    getOne = (getOne === void 666 || getOne === true)\n    var ret = lexer(string, getOne)\n    if (getOne) {\n        return typeof ret[0] === 'string' ? ret[1] : ret[0]\n    }\n    return ret\n}\n\nfunction lexer(string, getOne) {\n    var tokens = []\n    var breakIndex = 120\n    var stack = []\n    var origString = string\n    var origLength = string.length\n\n    stack.last = function() {\n        return stack[stack.length - 1]\n    }\n    var ret = []\n\n    function addNode(node) {\n        var p = stack.last()\n        if (p && p.children) {\n            p.children.push(node)\n        } else {\n            ret.push(node)\n        }\n    }\n\n    var lastNode\n    do {\n        if (--breakIndex === 0) {\n            break\n        }\n        var arr = getCloseTag(string)\n\n        if (arr) { //处理关闭标签\n            string = string.replace(arr[0], '')\n            const node = stack.pop()\n                //处理下面两种特殊情况：\n                //1. option会自动移除元素节点，将它们的nodeValue组成新的文本节点\n                //2. table会将没有被thead, tbody, tfoot包起来的tr或文本节点，收集到一个新的tbody元素中\n            if (node.type === 'option') {\n                node.children = [{\n                    type: '#text',\n                    nodeValue: getText(node)\n                }]\n            } else if (node.type === 'table') {\n                insertTbody(node.children)\n            }\n            lastNode = null\n            if (getOne && ret.length === 1 && !stack.length) {\n                return [origString.slice(0, origLength - string.length), ret[0]]\n            }\n            continue\n        }\n\n        var arr = getOpenTag(string)\n        if (arr) {\n            string = string.replace(arr[0], '')\n            var node = arr[1]\n            addNode(node)\n            var selfClose = !!(node.isVoidTag || specalTag[node.type])\n            if (!selfClose) { //放到这里可以添加孩子\n                stack.push(node)\n            }\n            if (getOne && selfClose && !stack.length) {\n                return [origString.slice(0, origLength - string.length), node]\n            }\n            lastNode = node\n            continue\n        }\n\n        var text = ''\n        do {\n            //处理<div><<<<<<div>的情况\n            const index = string.indexOf('<')\n            if (index === 0) {\n                text += string.slice(0, 1)\n                string = string.slice(1)\n\n            } else {\n                break\n            }\n        } while (string.length);\n        //处理<div>{aaa}</div>,<div>xxx{aaa}xxx</div>,<div>xxx</div>{aaa}sss的情况\n        const index = string.indexOf('<') //判定它后面是否存在标签\n        const bindex = string.indexOf('{') //判定它后面是否存在jsx\n        const aindex = string.indexOf('}')\n\n        let hasJSX = (bindex < aindex) && (index === -1 || bindex < index)\n        if (hasJSX) {\n            if (bindex !== 0) { // 收集jsx之前的文本节点\n                text += string.slice(0, bindex)\n                string = string.slice(bindex)\n            }\n            addText(lastNode, text, addNode)\n            string = string.slice(1) //去掉前面{\n            var arr = parseCode(string)\n            addNode(makeJSX(arr[1]))\n            lastNode = false\n            string = string.slice(arr[0].length + 1) //去掉后面的}\n        } else {\n            if (index === -1) {\n                text = string\n                string = ''\n            } else {\n                text += string.slice(0, index)\n                string = string.slice(index)\n            }\n            addText(lastNode, text, addNode)\n        }\n\n    } while (string.length);\n    return ret\n}\n\n\nfunction addText(lastNode, text, addNode) {\n    if (/\\S/.test(text)) {\n        if (lastNode && lastNode.type === '#text') {\n            lastNode.text += text\n        } else {\n            lastNode = {\n                type: '#text',\n                nodeValue: text\n            }\n            addNode(lastNode)\n        }\n    }\n}\n\n//它用于解析{}中的内容，如果遇到不匹配的}则返回, 根据标签切割里面的内容 \nfunction parseCode(string) { // <div id={ function(){<div/>} }>\n    var word = '', //用于匹配前面的单词\n        braceIndex = 1,\n        codeIndex = 0,\n        nodes = [],\n        quote,\n        escape = false,\n        state = 'code'\n    for (var i = 0, n = string.length; i < n; i++) {\n        var c = string.charAt(i),\n            next = string.charAt(i + 1)\n        switch (state) {\n            case 'code':\n                if (c === '\"' || c === \"'\") {\n                    state = 'string'\n                    quote = c\n                } else if (c === '{') {\n                    braceIndex++\n                } else if (c === '}') {\n                    braceIndex--\n                    if (braceIndex === 0) {\n                        collectJSX(string, codeIndex, i, nodes)\n                        return [string.slice(0, i), nodes]\n                    }\n                } else if (c === '<') {\n                    var word = '',\n                        empty = true ,\n                        index = i - 1\n                    do {\n                        c = string.charAt(index)\n                        if (empty && rsp.test(c)) {\n                            continue\n                        }\n                        if (rsp.test(c)) {\n                            break\n                        }\n                        empty = false\n                        word = c + word\n                        if (word.length > 7) { //性能优化\n                            break\n                        }\n                    } while (--index >= 0);\n                    var chunkString = string.slice(i)\n                    if (word === '' || /(=>|return|\\{|\\(|\\[|\\,)$/.test(word) && /\\<\\w/.test(chunkString)) {\n                        collectJSX(string, codeIndex, i, nodes)\n                        var chunk = lexer(chunkString, true)\n                        nodes.push(chunk[1])\n                        i += (chunk[0].length - 1) //因为已经包含了<, 需要减1\n                        codeIndex = i + 1\n                    }\n\n                }\n                break\n            case 'string':\n                if (c == '\\\\' && (next === '\"' || next === \"'\")) {\n                    escape = !escape\n                } else if (c === quote && !escape) {\n                    state = 'code'\n                }\n                break\n        }\n\n    }\n}\n\nfunction collectJSX(string, codeIndex, i, nodes) {\n    var nodeValue = string.slice(codeIndex, i)\n    if (/\\S/.test(nodeValue)) { //将{前面的东西放进去\n        nodes.push({\n            type: '#jsx',\n            nodeValue: nodeValue\n        })\n    }\n}\n\nvar rtbody = /^(tbody|thead|tfoot)$/\n\nfunction insertTbody(nodes) {\n    var tbody = false\n    for (var i = 0, n = nodes.length; i < n; i++) {\n        var node = nodes[i]\n        if (rtbody.test(node.nodeName)) {\n            tbody = false\n            continue\n        }\n\n        if (node.nodeName === 'tr') {\n            if (tbody) {\n                nodes.splice(i, 1)\n                tbody.children.push(node)\n                n--\n                i--\n            } else {\n                tbody = {\n                    nodeName: 'tbody',\n                    props: {},\n                    children: [node]\n                }\n                nodes.splice(i, 1, tbody)\n            }\n        } else {\n            if (tbody) {\n                nodes.splice(i, 1)\n                tbody.children.push(node)\n                n--\n                i--\n            }\n        }\n    }\n}\n\n\nfunction getCloseTag(string) {\n    if (string.indexOf(\"</\") === 0) {\n        var match = string.match(/\\<\\/(\\w+)>/)\n        if (match) {\n            var tag = match[1]\n            string = string.slice(3 + tag.length)\n            return [match[0], {\n                type: tag\n            }]\n        }\n    }\n    return null\n}\n\nfunction getOpenTag(string) {\n    if (string.indexOf(\"<\") === 0) {\n        var i = string.indexOf('<!--') //处理注释节点\n        if (i === 0) {\n            var l = string.indexOf('-->')\n            if (l === -1) {\n                thow('注释节点没有闭合 ' + string.slice(0, 100))\n            }\n            var node = {\n                type: '#comment',\n                nodeValue: string.slice(4, l)\n            }\n\n            return [string.slice(0, l + 3), node]\n        }\n        var match = string.match(/\\<(\\w[^\\s\\/\\>]*)/) //处理元素节点\n        if (match) {\n            var leftContent = match[0],\n                tag = match[1]\n            var node = {\n                type: tag,\n                props: {},\n                children: []\n            }\n\n            string = string.replace(leftContent, '') //去掉标签名(rightContent)\n            var arr = getAttrs(string) //处理属性\n            if (arr) {\n                node.props = arr[1]\n                string = string.replace(arr[0], '')\n                leftContent += arr[0]\n            }\n\n            if (string[0] === '>') { //处理开标签的边界符\n                leftContent += '>'\n                string = string.slice(1)\n                if (voidTag[node.type]) {\n                    node.isVoidTag = true\n                }\n            } else if (string.slice(0, 2) === '/>') { //处理开标签的边界符\n                leftContent += '/>'\n                string = string.slice(2)\n                node.isVoidTag = true\n            } \n\n            if (!node.isVoidTag && specalTag[tag]) { //如果是script, style, xmp等元素\n                var closeTag = '</' + tag + '>'\n                var j = string.indexOf(closeTag)\n                var nodeValue = string.slice(0, j)\n                leftContent += nodeValue + closeTag\n                node.children.push({\n                    type: '#text',\n                    nodeValue: nodeValue\n                })\n            }\n\n            return [leftContent, node]\n        }\n    }\n}\n\nfunction getText(node) {\n    var ret = ''\n    node.children.forEach(function(el) {\n        if (el.type === '#text') {\n            ret += el.nodeValue\n        } else if (el.children && !hiddenTag[el.type]) {\n            ret += getText(el)\n        }\n    })\n    return ret\n}\n\nfunction getAttrs(string) {\n    var state = 'AttrNameOrJSX',\n        attrName = '',\n        attrValue = '',\n        quote,\n        escape,\n        props = {}\n\n    for (var i = 0, n = string.length; i < n; i++) {\n        var c = string[i]\n        switch (state) {\n            case 'AttrNameOrJSX':\n                if (c === '/' || c === '>') {\n                    return [string.slice(0, i), props]\n                }\n                if (rsp.test(c)) {\n                    if (attrName) {\n                        state = 'AttrEqual'\n                    }\n                } else if (c === '=') {\n                    if (!attrName) {\n                        throw '必须指定属性名'\n                    }\n                    state = 'AttrQuoteOrJSX'\n                } else if (c === '{') {\n                    state = 'SpreadJSX'\n                } else {\n                    attrName += c\n                }\n                break\n            case 'AttrEqual':\n                if (c === '=') {\n                    state = 'AttrQuoteOrJSX'\n                }\n                break\n            case 'AttrQuoteOrJSX':\n                if (c === '\"' || c === \"'\") {\n                    quote = c\n                    state = 'AttrValue'\n                    escape = false\n                } else if (c === '{') {\n                    state = 'JSX'\n                }\n                break\n            case 'AttrValue':\n                if (c === '\\\\') {\n                    escape = !escape\n                }\n                if (c !== quote) {\n                    attrValue += c\n                } else if (c === quote && !escape) {\n                    props[attrName] = attrValue\n                    attrName = attrValue = ''\n                    state = 'AttrNameOrJSX'\n                }\n                break\n            case 'SpreadJSX':\n                i += 3\n            case 'JSX':\n\n                var arr = parseCode(string.slice(i))\n                i += arr[0].length\n\n                props[state === 'SpreadJSX' ? 'spreadAttribute' : attrName] = makeJSX(arr[1])\n                attrName = attrValue = ''\n                state = 'AttrNameOrJSX'\n                break\n        }\n    }\n    throw '必须关闭标签'\n}\n\nfunction makeJSX(JSXNode) {\n    return JSXNode.length === 1 && JSXNode[0].type === '#jsx' ? JSXNode[0] : { type: '#jsx', nodeValue: JSXNode }\n}\n\nexport default JSXParser","// //单例HTML标签,多例自定义标签\n// (function (global, factory) {\n//     typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n//         typeof define === 'function' && define.amd ? define(factory) :\n//             (global = global || self, global.Vue = factory());\n// })(this, function () {\n// var vnode = evalJSX(str, data, config)\n// config只需要一个参数，ns，默认是'anu',当你配置成'React'，就会生成 React.createElement\n// 也可以全局配置它 evalJSX.globalNs = 'React' 就会生成 React.createElement\n\nimport JSXParser from \"./jsx-parser\"\n\nvar rComponent = /^(this|[A-Z])/\nvar cacheFns = {}\nvar cacheStr = {}\n\nexport function evalJSX (str, obj, config) {\n    var jsx = new innerClass(str, config)\n    var output = jsx.init()\n    return output;\n    // console.log(output);\n    // if (!obj)\n    //     obj = {}\n    // if (typeof anu === 'function')\n    //     obj.anu = anu\n    // var args = 'var args0 = arguments[0];'\n    // for (var i in obj) {\n    //     if (i !== 'this')\n    //         args += 'var ' + i + ' = args0[\"' + i + '\"];'\n    // }\n    // args += 'return ' + output\n    // try {\n    //     var fn\n    //     if (cacheFns[ args ]) {\n    //         fn = cacheFns[ args ]\n    //     } else {\n    //         fn = cacheFns[ args ] = Function(args)\n    //     }\n    //     console.log(fn)\n    //     var a = fn.call(obj.this, obj)\n    //     return a\n    // } catch (e) {\n    //     console.log(e, args)\n    // }\n\n}\n\nfunction innerClass (str, config) {\n    config = config || {}\n    config.ns = evalJSX.globalNs || config.ns || ''\n    this.input = str\n    this.ns = config.ns\n    this.type = config.type\n}\ninnerClass.prototype = {\n    init: function () {\n\n        if (typeof JSXParser === 'function') {\n            var useCache = this.input.length < 720\n            if (useCache && cacheStr[ this.input ]) {\n                return cacheStr[ this.input ]\n            }\n            var array = (new JSXParser(this.input)).parse()\n\n\n            var evalString = this.genChildren([ array ])\n            if (useCache) {\n                return cacheStr[ this.input ] = evalString\n            }\n            return evalString\n        } else {\n            throw 'need JSXParser https://github.com/RubyLouvre/jsx-parser'\n        }\n\n    },\n    genTag: function (el) {\n        var children = this.genChildren(el.children, el)\n        var ns = this.ns\n        var type = rComponent.test(el.type) ? el.type : JSON.stringify(el.type)\n        return ns + '$createElement(' + type +\n            ',' + this.genProps(el.props, el) +\n            ',' + children + ')'\n    },\n    genProps: function (props, el) {\n\n        if (!props && !el.spreadAttribute) {\n            return 'null'\n        }\n        var ret = '{'\n        for (var i in props) {\n            ret += JSON.stringify(i) + ':' + this.genPropValue(props[ i ]) + ',\\n'\n        }\n        ret = ret.replace(/\\,\\n$/, '') + '}'\n        if (el.spreadAttribute) {\n            return 'Object.assign({},' + el.spreadAttribute + ',' + ret + ')'\n        }\n        return ret\n    },\n    genPropValue: function (val) {\n        if (typeof val === 'string') {\n            return JSON.stringify(val)\n        }\n        if (val) {\n            if (Array.isArray(val.nodeValue)) {\n                return this.genChildren(val.nodeValue)\n            }\n            if (val) {\n                return val.nodeValue\n            }\n        }\n    },\n    genChildren: function (children, obj, join) {\n        // debugger\n        if (obj) {\n\n            if (obj.isVoidTag || !obj.children.length) {\n                return 'null'\n            }\n        }\n        var ret = []\n        for (var i = 0, el; el = children[ i++ ];) {\n            if (el.type === '#jsx') {\n\n                if (Array.isArray(el.nodeValue)) {\n                    ret[ ret.length ] = this.genChildren(el.nodeValue, null, ' ')\n                } else {\n                    ret[ ret.length ] = `$createTextNode(${el.nodeValue})`\n                }\n            } else if (el.type === '#text') {\n                ret[ ret.length ] = JSON.stringify(el.nodeValue)\n            } else if (el) {\n                ret[ ret.length ] = this.genTag(el)\n            }\n        }\n        console.log('ret', ret)\n        return ret.join(join || ',')\n    }\n\n}\n// return evalJSX;\n// }\n// });","import { initState } from \"./state\"\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\"\r\nimport { initGlobalAPI } from \"./global-api/index\"\r\nimport { mergeOptions } from \"./utils\";\r\nimport { nextTick } from \"../utils/next-tick\";\r\nimport { Watcher } from \"./observer/watcher\";\r\nimport { initRender } from \"./render\";\r\nimport { evalJSX } from \"./compiler/evalJSX\";\r\n\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    //Vue的内部属性#options 用户传递所以参数\r\n    const vm = this;\r\n    // console.log(vm.constructor.options, options)\r\n    vm.$options = mergeOptions(vm.constructor.options, options);\r\n    // console.log('opt', vm.$options)\r\n    callHook(vm, 'beforeCreate');\r\n    initRender(vm);\r\n    initState(vm); // 初始化状态\r\n    callHook(vm, 'created');\r\n\r\n    // 通过模板渲染\r\n\r\n    if (vm.$options.el) { // 用户提供挂载节点\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    el = document.querySelector(el);\r\n    const vm = this;\r\n    // 同时存在template与render使用render，如果没有则使用id=“app”的模板\r\n    // 将template转换为render函数挂载到opts上\r\n    const opts = this.$options;\r\n\r\n    if (!opts.render) { // 如果没有render，则编译模板\r\n      let template = opts.template;\r\n      // console.log('opts---', opts);\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      // const render = compileToFunction(template);\r\n      console.log(this.createElement);\r\n      const render = new Function(`with(this){return ${evalJSX(template, { this: this })}}`)\r\n      opts.render = render;\r\n    }\r\n    //  opts.render;\r\n    mountComponent(vm, el);\r\n  }\r\n\r\n  Vue.prototype.$nextTick = nextTick;\r\n  Vue.prototype.$watch = function (expOrFn, cb, options = {}) {\r\n    const vm = this;\r\n    options.immediate = options.immediate ? options.immediate : true;\r\n    options.user = true;\r\n    const watcher = new Watcher(vm, expOrFn, cb, options)\r\n    if (options.immediate) {\r\n      try {\r\n        cb.call(vm, watcher.value)\r\n      } catch (error) {\r\n        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\r\n      }\r\n    }\r\n  };\r\n}","import { initGlobalAPI } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\"\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { renderMixin } from \"./render\";\r\nimport { stateMixin } from \"./state\";\r\n\r\nfunction Vue (options) {\r\n  // 初始化操作\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\ninitGlobalAPI(Vue);\r\nstateMixin(Vue);\r\n\r\n\r\n\r\nexport default Vue;"],"names":["callbacks","pending","p","Promise","resolve","flushCallbacks","copies","slice","length","forEach","timerFunc","then","nextTick","cb","ctx","_resolve","push","call","LIFECYCLE_HOOKS","ASSET_TYPES","initAssetRegisters","Vue","type","id","definition","options","_base","extend","isObject","data","proxy","vm","source","key","Object","defineProperty","get","set","newValue","strategy","hook","mergeHook","parentVal","childVal","concat","res","create","mergeOptions","parent","child","mergeField","hasOwnProperty","isReservedTag","tag","str","obj","split","initExtend","extendOptions","cid","Sub","VueComponent","_init","prototype","constructor","initMixin","mixin","initGlobalAPI","oldArrayMethods","Array","methods","arrayMethods","method","args","ret","apply","ob","__ob__","inserted","observeArray","uid","Dep","subs","sub","target","addDep","watcher","update","targetStack","pushTarget","popTarget","pop","Observer","value","enumerable","configurable","isArray","__proto__","walk","keys","defineReactive","i","observe","dep","depend","notify","initState","opts","$options","console","log","props","initProps","initData","initMethods","watch","initWatch","_data","propsOptions","propsData","_props","$props","_propKeys","porps","bind","handler","h","createWatcher","expOrFn","$watch","stateMixin","dataDef","propsDef","has","queue","flushSchedulerQueue","run","queueWatcher","Watcher","exprOrFn","user","getter","path","addSub","newVal","oldVal","sameVnode","a","b","createKeyToOldIdx","children","beginIdx","endIdx","map","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","el","insertBefore","removeChild","replaceChild","text","textContent","updatePrototies","oldChildren","newChildren","updateChildren","appendChild","innerHTML","oldKeyToIdx","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","nextSibling","idxInOld","vnodeToMove","undefined","createComponent","componentInstance","$el","document","createElement","createTextNode","d","hooks","init","newProps","oldProps","oldStyle","style","newStyle","removeAttribute","styleName","trim","className","startsWith","event","toLowerCase","setAttribute","mountComponent","callHook","updateComponent","_update","_render","lifecycleMixin","prevVnode","_vnode","handlers","componentOptions","Ctor","_isComponent","$mount","components","renderMixin","_c","arguments","_v","_s","val","JSON","stringify","render","$createElement","initRender","$createTextNode","oneObject","_","voidTag","specalTag","hiddenTag","JSXParser","f","parse","input","getOne","rsp","string","lexer","breakIndex","stack","origString","origLength","last","addNode","node","lastNode","arr","getCloseTag","replace","nodeValue","getText","insertTbody","getOpenTag","selfClose","isVoidTag","index","indexOf","bindex","aindex","hasJSX","addText","parseCode","makeJSX","test","word","braceIndex","codeIndex","nodes","quote","escape","state","n","c","charAt","next","collectJSX","empty","chunkString","chunk","rtbody","tbody","nodeName","splice","match","l","thow","leftContent","getAttrs","closeTag","j","attrName","attrValue","JSXNode","rComponent","cacheStr","evalJSX","config","jsx","innerClass","output","ns","globalNs","useCache","array","evalString","genChildren","genTag","genProps","spreadAttribute","genPropValue","join","querySelector","template","outerHTML","Function","$nextTick","immediate","error","handleError","expression"],"mappings":"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"}