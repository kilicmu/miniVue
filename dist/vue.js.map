{"version":3,"file":"vue.js","sources":["../utils/next-tick.js","../src/shared/contants.js","../src/global-api/assets.js","../src/utils.js","../src/global-api/extend.js","../src/global-api/mixin.js","../src/global-api/index.js","../src/observer/array.js","../src/observer/dep.js","../src/observer/index.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/state.js","../src/vdom/patch.js","../src/lifecycle.js","../src/vdom/vnode.js","../src/vdom/create-component.js","../src/vdom/create-element.js","../src/render.js","../src/compiler/jsx-parser.js","../src/compiler/evalJSX.js","../src/init.js","../src/index.js"],"sourcesContent":["const callbacks = []\r\n\r\nlet pending = false;\r\nconst p = Promise.resolve();\r\n/**\r\n * 清空callbacks\r\n */\r\nfunction flushCallbacks () {\r\n  pending = false;\r\n  const copies = callbacks.slice(0);\r\n  callbacks.length = 0;\r\n  copies.forEach(copies => {\r\n    copies();\r\n  })\r\n}\r\n\r\nfunction timerFunc () {\r\n  p.then(flushCallbacks);\r\n}\r\n\r\nexport function nextTick (cb, ctx) {\r\n  let _resolve;\r\n  callbacks.push(() => {\r\n    if (cb) {\r\n      cb.call(ctx);\r\n    } else if (_resolve) {\r\n      _resolve(ctx);\r\n    }\r\n  })\r\n\r\n  if (!pending) {\r\n    pending = true;\r\n    timerFunc();\r\n  }\r\n\r\n  if (!cb && typeof Promise !== 'undefined') {\r\n    return new Promise(resolve => {\r\n      _resolve = resolve;\r\n    })\r\n  }\r\n\r\n}","export const LIFECYCLE_HOOKS = [\r\n  'beforeCreate',\r\n  'created',\r\n  'beforeMount',\r\n  'mounted',\r\n  'beforeUpdate',\r\n  'updated',\r\n  'beforeDestroy',\r\n  'destroyed',\r\n  'activated',\r\n  'deactivated',\r\n  'errorCaptured',\r\n  'serverPrefetch'\r\n]\r\n\r\n\r\nexport const ASSET_TYPES = [\r\n  'component',\r\n  'directive',\r\n  'filter'\r\n]","import { ASSET_TYPES } from \"../shared/contants\";\r\n\r\nexport function initAssetRegisters (Vue) {\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue[ type ] = function (id, definition) {\r\n      if (type === 'component') {\r\n        definition = this.options._base.extend(definition);\r\n      } else if (type === 'filter') {\r\n\r\n      } else if (type === 'directive') {\r\n\r\n      }\r\n      this.options[ type + 's' ][ id ] = definition;\r\n    }\r\n  })\r\n}","import { LIFECYCLE_HOOKS } from \"./shared/contants\";\r\n\r\nexport function isObject (data) {\r\n  return typeof data === \"object\" && data !== null;\r\n}\r\n\r\nexport function proxy (vm, source, key) {\r\n  Object.defineProperty(vm, key, {\r\n    get () {\r\n      return vm[ source ][ key ];\r\n    },\r\n    set (newValue) {\r\n      vm[ source ][ key ] = newValue;\r\n    }\r\n  })\r\n}\r\nconst strategy = {}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n  strategy[ hook ] = mergeHook;\r\n})\r\nfunction mergeHook (parentVal, childVal) {\r\n  if (childVal) {\r\n    if (parentVal) {\r\n      return parentVal.concat(childVal);\r\n    } else {\r\n      return [ childVal ];\r\n    }\r\n  } else {\r\n    return parentVal;\r\n  }\r\n}\r\n\r\nstrategy[ 'components' ] = function (parentVal, childVal) {\r\n\r\n  const res = Object.create(parentVal);\r\n  if (childVal) {\r\n    for (let key in childVal) {\r\n      res[ key ] = childVal[ key ];\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function mergeOptions (parent, child) {\r\n  const options = {};\r\n  function mergeField (key) {\r\n    if (strategy[ key ]) {\r\n      // debugger\r\n      return options[ key ] = strategy[ key ](parent[ key ], child[ key ]);\r\n    }\r\n    if (typeof parent[ key ] === 'object' && typeof child[ key ] === 'object') {\r\n      options[ key ] = {\r\n        ...parent[ key ],\r\n        ...child[ key ]\r\n      }\r\n    } else if (child[ key ] == null) {\r\n      options[ key ] = parent[ key ];\r\n    } else {\r\n      options[ key ] = child[ key ];\r\n    }\r\n    return options\r\n  }\r\n  for (const key in parent) {\r\n    mergeField(key);\r\n  }\r\n\r\n  for (const key in child) {\r\n    if (!parent.hasOwnProperty(key)) {\r\n      mergeField(key);\r\n    }\r\n  }\r\n  return options\r\n}\r\n\r\n\r\nexport function isReservedTag (tag) {\r\n  const str = 'input,div,ul,li,span,p';\r\n  const obj = {}\r\n  str.split(',').forEach(key => {\r\n    obj[ key ] = true\r\n  })\r\n  return !!obj[ tag ];\r\n}\r\n\r\n","import { mergeOptions } from \"../utils\";\r\n\r\nexport function initExtend (Vue) {\r\n  Vue.extend = function (extendOptions) {\r\n    let cid = 0;\r\n    const Sub = function VueComponent (options) {\r\n      this._init(options);\r\n    }\r\n\r\n    Sub.prototype = Object.create(this.prototype);\r\n    Sub.prototype.constructor = Sub;\r\n    Sub.cid = ++cid;\r\n    Sub.options = mergeOptions(this.options, extendOptions);\r\n    return Sub;\r\n  }\r\n}","import { mergeOptions } from \"../utils\";\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.options = {}\r\n  Vue.mixin = function (mixin) {\r\n    this.options = mergeOptions(this.options, mixin);\r\n    return this;\r\n  }\r\n}","import { nextTick } from \"../../utils/next-tick\";\r\nimport { ASSET_TYPES } from \"../shared/contants\";\r\nimport { initAssetRegisters } from \"./assets\";\r\nimport { initExtend } from \"./extend\";\r\nimport { initMixin } from \"./mixin\";\r\n\r\n\r\nexport function initGlobalAPI (Vue) {\r\n  Vue.options = {}\r\n  initMixin(Vue);\r\n  ASSET_TYPES.forEach(type => {\r\n    Vue.options[ type + 's' ] = {}\r\n  })\r\n  Vue.options._base = Vue;\r\n  initExtend(Vue);\r\n  initAssetRegisters(Vue);\r\n\r\n}","\r\n\r\nconst oldArrayMethods = Array.prototype;\r\n\r\nconst methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reverse',\r\n  'splice'\r\n]\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods);\r\n\r\nmethods.forEach(method => {\r\n  arrayMethods[ method ] = function (...args) {\r\n    const ret = oldArrayMethods[ method ].apply(this, args);\r\n    const ob = this.__ob__;\r\n    let inserted;\r\n\r\n    switch (method) {\r\n      case \"push\":\r\n      case \"unshift\":\r\n        inserted = args;\r\n        break;\r\n      case 'splice': // splice方法的第三个参数才是插入的值\r\n        inserted = args.slice(2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    inserted && ob.observeArray(inserted);\r\n    return ret;\r\n  }\r\n})","let uid = 0\r\n\r\nexport default class Dep {\r\n  constructor () {\r\n    this.id = uid++\r\n    this.subs = [];\r\n  }\r\n\r\n  addSub (sub) {\r\n    this.subs.push(sub);\r\n  }\r\n\r\n  depend () {\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this);\r\n    }\r\n  }\r\n\r\n  notify () {\r\n    const subs = this.subs.slice()\r\n    subs.forEach(watcher => {\r\n      watcher.update();\r\n    })\r\n  }\r\n}\r\n\r\n//这个target是为了获取依赖的Watcher\r\nDep.target = null;\r\nconst targetStack = []\r\nexport function pushTarget (watcher) {\r\n  Dep.target = watcher;\r\n  targetStack.push(watcher);\r\n}\r\n\r\nexport function popTarget () {\r\n  targetStack.pop();\r\n  Dep.target = targetStack[ targetStack.length - 1 ]\r\n}","import { isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\nclass Observer {\r\n  constructor (data) {\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this,\r\n      enumerable: false,\r\n      configurable: false\r\n    })\r\n    // 不需要对数组索引进行拦截\r\n    if (Array.isArray(data)) {\r\n      data.__proto__ = arrayMethods;\r\n\r\n    } else {\r\n      this.walk(data); //对数据分步处理\r\n    }\r\n  }\r\n\r\n  walk (data) {\r\n    Object.keys(data).forEach(key => {\r\n      defineReactive(data, key, data[ key ]); // 定义响应式变化\r\n    })\r\n  }\r\n\r\n  observeArray (data) {\r\n    for (const i in data) {\r\n      observe(data[ i ]);   // 解决数组内对象的响应式\r\n    }\r\n  }\r\n}\r\n\r\nexport function defineReactive (data, key, value) {\r\n  const dep = new Dep();\r\n  observe(value);\r\n  // debugger\r\n  // if (data.__ob__ instanceof Observer) {\r\n  //   return;\r\n  // }\r\n  Object.defineProperty(data, key, {\r\n    configurable: true,\r\n    enumerable: true,\r\n    get () {\r\n      if (Dep.target) {\r\n        dep.depend();\r\n      }\r\n      return value;\r\n    },\r\n    set (newValue) {\r\n      if (newValue === value) return;\r\n      observe(value)\r\n      value = newValue;\r\n      dep.notify();\r\n    }\r\n  })\r\n}\r\n\r\n\r\n\r\nexport function observe (data) {\r\n  // TODO对数据监控\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  // 对data数据做definePropert\r\n  return new Observer(data);\r\n}","import { nextTick } from \"../../utils/next-tick\";\r\n\r\nlet has = {};\r\nlet flushing = false;\r\nlet queue = [];\r\n\r\nfunction flushSchedulerQueue () {\r\n  queue.forEach(watcher => {\r\n    watcher.run();\r\n\r\n  })\r\n  has = {};\r\n  queue = [];\r\n}\r\n\r\nexport function queueWatcher (watcher) {\r\n\r\n  const id = watcher.id;\r\n  if (has[ id ] == null) {\r\n    has[ id ] = true;\r\n    if (!flushing) {\r\n      queue.push(watcher)\r\n    }\r\n    nextTick(flushSchedulerQueue, this);\r\n  }\r\n}","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./scheduler\";\r\nlet id = 0;\r\nexport class Watcher {\r\n  constructor(vm, exprOrFn, cb, options) {\r\n    this.id = id++;\r\n    this.vm = vm;\r\n    this.exprOrFn = exprOrFn;\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.user = options.user; // 判断是否是$watch创造的 watcher\r\n    this.value = null;\r\n    this.lazy = options.lazy;\r\n    this.dirty = this.lazy;\r\n\r\n    if (typeof exprOrFn === \"string\") {\r\n      this.getter = function () {\r\n        const path = exprOrFn.split(\".\");\r\n        let obj = vm;\r\n        for (let p of path) {\r\n          obj = obj[p];\r\n        }\r\n        return obj;\r\n      };\r\n    } else {\r\n      this.getter = exprOrFn;\r\n    }\r\n\r\n    this.value = this.lazy ? undefined : this.get();\r\n  }\r\n\r\n  get() {\r\n    const vm = this.vm;\r\n    let value = undefined;\r\n    pushTarget(this);\r\n    value = this.getter.call(vm);\r\n    popTarget();\r\n    return value;\r\n  }\r\n\r\n  evaluate() {\r\n    this.value = this.get();\r\n    this.dirty = false;\r\n  }\r\n\r\n  addDep(dep) {\r\n    const id = dep.id;\r\n    dep.addSub(this);\r\n  }\r\n\r\n  update() {\r\n    if (this.lazy) {\r\n      this.dirty = true;\r\n    } else {\r\n      queueWatcher(this);\r\n    }\r\n  }\r\n\r\n  run() {\r\n    const newVal = this.get();\r\n    const oldVal = this.value;\r\n    this.value = newVal;\r\n    console.log(this.user);\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newVal, oldVal);\r\n    }\r\n  }\r\n}\r\n","import { observe, defineReactive } from \"./observer/index\";\r\nimport { Watcher } from \"./observer/watcher\";\r\nimport { isObject } from \"./utils\";\r\nimport { proxy } from \"./utils\";\r\nimport Dep from \"./observer/dep\";\r\n\r\nexport function initState (vm) {\r\n  const opts = vm.$options;\r\n  console.log(opts);\r\n  if (opts.props) {\r\n    console.log('props: =----', opts.props)\r\n    initProps(vm, opts.props);\r\n  }\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n  if (opts.methods) {\r\n    initMethods(vm, opts.methods);\r\n  }\r\n\r\n  // compouted\r\n  // watch\r\n  if (opts.watch) {\r\n    initWatch(vm, opts.watch);\r\n  }\r\n\r\n  if (opts.computed) {\r\n    initComputed(vm, opts.computed);\r\n  }\r\n}\r\n\r\nfunction initComputed (vm, computed) {\r\n  const watchers = (vm._computedWatchers = Object.create(null));\r\n  for (let key in computed) {\r\n    const userDef = computed[ key ];\r\n    const getter = typeof userDef === \"function\" ? userDef : userDef.get;\r\n    watchers[ key ] = new Watcher(vm, getter, () => { }, { lazy: true });\r\n    if (!(key in vm)) {\r\n      defineComputed(vm, key, userDef);\r\n    }\r\n  }\r\n}\r\n\r\nconst sharedPropertyDefinition = {\r\n  enumerable: true,\r\n  configurable: true,\r\n  get: () => { },\r\n  set: () => { },\r\n};\r\n\r\nfunction defineComputed (target, key, userDef) {\r\n  if (typeof userDef === \"function\") {\r\n    sharedPropertyDefinition.get = createComputedGetter(key);\r\n    sharedPropertyDefinition.set = () => { };\r\n  } else {\r\n    sharedPropertyDefinition.get = userDef.get\r\n      ? userDef.get\r\n      : createComputedGetter(key);\r\n    sharedPropertyDefinition.set = userDef.set ? userDef.set : () => { };\r\n  }\r\n  Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\r\n\r\nfunction createComputedGetter (key) {\r\n  return function computedGetter () {\r\n    const watcher = this._computedWatchers && this._computedWatchers[ key ];\r\n    if (watcher) {\r\n      if (watcher.dirty) {\r\n        watcher.evaluate();\r\n      }\r\n      // if (Dep.target) {\r\n      //   watcher.depend();\r\n      // }\r\n      return watcher.value;\r\n    }\r\n  };\r\n}\r\n\r\nfunction initData (vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = typeof data === \"function\" ? data.call(vm) : data;\r\n  // 对数据进行观测\r\n  for (const key in data) {\r\n    proxy(vm, \"_data\", key);\r\n  }\r\n  observe(data);\r\n}\r\n\r\nfunction initProps (vm, propsOptions) {\r\n  const propsData = vm.$options.propsData;\r\n  const props = vm._props = {};\r\n  const keys = vm.$props._propKeys = [];\r\n  for (const key of propsOptions) {\r\n    keys.push(key);\r\n    const value = propsData[ key ];\r\n    defineReactive(props, key, value);\r\n\r\n    if (!(key in vm)) {\r\n      proxy(vm, `_props`, key);\r\n    }\r\n  }\r\n}\r\n\r\nfunction initMethods (vm, methods) {\r\n  const porps = vm.$options.props;\r\n  for (const key in methods) {\r\n    vm[ key ] =\r\n      typeof methods[ key ] !== \"function\"\r\n        ? function () { }\r\n        : methods[ key ].bind(vm);\r\n  }\r\n}\r\n\r\nfunction initWatch (vm, watch) {\r\n  for (const key in watch) {\r\n    const handler = watch[ key ];\r\n    if (Array.isArray[ handler ]) {\r\n      for (let h of handler) {\r\n        createWatcher(vm, key, h);\r\n      }\r\n    } else {\r\n      createWatcher(vm, key, handler);\r\n    }\r\n  }\r\n}\r\n\r\nfunction createWatcher (vm, expOrFn, handler, options) {\r\n  if (typeof handler === \"object\") {\r\n    options = handler;\r\n    handler = options.handler;\r\n  }\r\n  if (typeof handler === \"string\") {\r\n    handler = vm[ handler ];\r\n  }\r\n\r\n  return vm.$watch(expOrFn, handler, options);\r\n}\r\n\r\nexport function stateMixin (Vue) {\r\n  const dataDef = {};\r\n  dataDef.get = function () {\r\n    return this._data;\r\n  };\r\n  const propsDef = {};\r\n  propsDef.get = function () {\r\n    return this._props;\r\n  };\r\n  Object.defineProperty(Vue.prototype, \"$data\", dataDef);\r\n  Object.defineProperty(Vue.prototype, \"$props\", propsDef);\r\n}\r\n","function sameVnode (a, b) {\r\n  return (\r\n    a.key === b.key && (\r\n      a.tag === b.tag\r\n    )\r\n  )\r\n}\r\n\r\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\r\n  let i, key;\r\n  const map = {}\r\n  for (i = beginIdx; i <= endIdx; ++i) {\r\n    key = children[ i ].key\r\n\r\n    map[ key ] = i;\r\n  }\r\n  return map;\r\n}\r\n\r\nexport function patch (oldVnode, vnode) {\r\n  if (!oldVnode) {\r\n    return createElm(vnode);\r\n  } else {\r\n    const isRealElement = oldVnode.nodeType;\r\n    if (isRealElement) { // 若oldVnode是一个真实节点，首渲染\r\n      const oldElm = oldVnode;\r\n      const parentElm = oldElm.parentNode;\r\n      const el = createElm(vnode);\r\n      parentElm.insertBefore(el, oldElm);\r\n      parentElm.removeChild(oldElm);\r\n      return el;\r\n    } else {\r\n      if (oldVnode.tag !== vnode.tag) {\r\n        const el = oldVnode.el; // 获取真实节点\r\n        oldVnode.el = el.parentNode.replaceChild(createElm(vnode), el);\r\n      }\r\n\r\n      if (!oldVnode.tag) {\r\n        if (oldVnode.text !== vnode.text) {\r\n          oldVnode.el.textContent = vnode.text;\r\n        }\r\n      }\r\n\r\n      const el = vnode.el = oldVnode.el;\r\n      updatePrototies(vnode, oldVnode);\r\n\r\n      const oldChildren = oldVnode?.children ?? [];\r\n      const newChildren = vnode?.children ?? [];\r\n      if (oldChildren.length && newChildren.length) {\r\n        updateChildren(el, oldChildren, newChildren)\r\n      } else if (newChildren.length > 0) {\r\n        for (let child of newChildren) {\r\n          el.appendChild(createElm(child));\r\n        }\r\n      } else if (oldChildren.length > 0) {\r\n        el.innerHTML = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction updateChildren (parentElm, oldChildren, newChildren) {\r\n  let oldKeyToIdx;\r\n\r\n  let oldStartIndex = 0,\r\n    oldStartVnode = oldChildren[ oldStartIndex ],\r\n    oldEndIndex = oldChildren.length - 1,\r\n    oldEndVnode = oldChildren[ oldEndIndex ];\r\n\r\n  let newStartIndex = 0,\r\n    newStartVnode = newChildren[ newStartIndex ],\r\n    newEndIndex = newChildren.length - 1,\r\n    newEndVnode = newChildren[ newEndIndex ];\r\n  // debugger\r\n  while (newStartIndex <= newEndIndex && oldStartIndex <= oldEndIndex) {\r\n    if (!oldStartVnode) {\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n    } else if (!oldEndVnode) {\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n    }\r\n    if (sameVnode(oldStartVnode, newStartVnode)) {\r\n      console.log(oldStartVnode, newStartVnode)\r\n      patch(oldStartVnode, newStartVnode); // 复用\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    } else if (sameVnode(oldEndVnode, newEndVnode)) {\r\n      patch(oldEndVnode, newEndVnode);\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n      newEndVnode = newChildren[ --newEndIndex ];\r\n    } else if (sameVnode(oldStartVnode, newEndVnode)) {\r\n      patch(oldStartVnode, newEndVnode);\r\n      parentElm.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);\r\n      oldStartVnode = oldChildren[ ++oldStartIndex ];\r\n      newEndVnode = newChildren[ --newEndIndex ];\r\n    } else if (sameVnode(oldEndVnode, newStartVnode)) {\r\n      // debugger\r\n      patch(oldEndVnode, newStartVnode);\r\n      parentElm.insertBefore(oldEndVnode.el, oldStartVnode.el);\r\n      oldEndVnode = oldChildren[ --oldEndIndex ];\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    } else { // 乱序\r\n      // 通过老key做映射表\r\n      // 在映射表如果有当前newVnode则将那个node移动到oldEndVnode前面\r\n      // 如果没有则新建一个newVnode的节点然后吧这个节点插入到startVnode前\r\n      if (!oldKeyToIdx) oldKeyToIdx = createKeyToOldIdx(oldChildren, oldStartIndex, oldEndIndex);\r\n      let idxInOld = oldKeyToIdx[ newStartVnode.key ]\r\n      if (!idxInOld) {\r\n\r\n        parentElm.insertBefore(createElm(newStartVnode), oldStartVnode.el);\r\n      } else {\r\n        const vnodeToMove = oldChildren[ idxInOld ];\r\n        oldChildren[ idxInOld ] = undefined;\r\n        console.log(\"-------\", oldStartVnode);\r\n        parentElm.insertBefore(vnodeToMove.el, oldStartVnode.el);\r\n        patch(vnodeToMove, newStartVnode);\r\n      }\r\n      newStartVnode = newChildren[ ++newStartIndex ];\r\n    }\r\n  }\r\n\r\n  if (newStartIndex <= newEndIndex) {\r\n    for (let i = newStartIndex; i <= newEndIndex; ++i) {\r\n      // parentElm.appendChild(createElm(newChildren[ i ]));\r\n      const el = newChildren[ newEndIndex + 1 ]?.el ?? null;\r\n      // console.log('----', el, newChildren[ i ]);\r\n      parentElm.insertBefore(createElm(newChildren[ i ]), el);\r\n    }\r\n  }\r\n\r\n  if (oldStartIndex <= oldEndIndex) {\r\n    for (let i = oldStartIndex; i <= oldEndIndex; ++i) {\r\n      const child = oldChildren[ i ];\r\n      if (child != undefined) {\r\n        parentElm.removeChild(child.el);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport function createElm (vnode) {\r\n  const { tag, children, key, data, text } = vnode;\r\n  if (typeof tag === 'string') {\r\n    // TODO 组件判断\r\n    if (createComponent(vnode)) {\r\n      // console.log('el -----------------', vnode.el);\r\n      return vnode.el = vnode.componentInstance.$el;\r\n    }\r\n    vnode.el = document.createElement(tag);\r\n    updatePrototies(vnode);\r\n    children.forEach(child => {\r\n      return vnode.el.appendChild(createElm(child))\r\n    })\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\nfunction createComponent (vnode) {\r\n  let d = vnode.data;\r\n  d.hooks && d.hooks.init && d.hooks.init(vnode)\r\n  // if ((d = d.hooks) && (d = d.init)) {\r\n  //   d(vnode);\r\n  // }\r\n  if (vnode.componentInstance) {\r\n    return true;\r\n  }\r\n}\r\n\r\nfunction updatePrototies (vnode, oldVnode) {\r\n  const newProps = vnode.data || {};\r\n  const el = vnode.el;\r\n  // console.log('____', newProps.onClick())\r\n  if (oldVnode) {\r\n    const oldProps = oldVnode.data || {};\r\n    // 处理style\r\n    const oldStyle = oldProps.style ?? {};\r\n    const newStyle = newProps.style ?? {};\r\n\r\n    for (let key in oldStyle) {\r\n      if (!newStyle[ key ]) el.style[ key ] = ''\r\n    }\r\n\r\n    for (let key in oldProps) {\r\n      if (!newProps[ key ]) {\r\n        el.removeAttribute(key);\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const key in newProps) {\r\n    if (key === 'style') {\r\n      for (const styleName in newProps.style) {\r\n        el.style[ styleName.trim() ] = newProps.style[ styleName ]\r\n      }\r\n    } else if (key === 'class') {\r\n      el.className = newProps.class;\r\n    } else if (key.startsWith('on')) {\r\n      const event = key.toLowerCase();\r\n      console.log();\r\n      el[ event ] = newProps[ key ];\r\n    } else if (key !== 'undefined') {\r\n      el.setAttribute(key, newProps[ key ]);\r\n    }\r\n  }\r\n}","import { Watcher } from \"./observer/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\nexport function mountComponent (vm, el) {\r\n  const opts = vm.$options;\r\n  vm.$el = el;\r\n  callHook(vm, 'beforeMount');\r\n  const updateComponent = function () {\r\n    callHook(vm, 'beforeUpdate');\r\n    // 1. 通过_render方法生成虚拟dom\r\n    // 2. _update方法通过vnode生成真实dom\r\n    vm._update(vm._render());\r\n    callHook(vm, 'updated');\r\n  }\r\n  // 通过生成Watcher达成首次渲染\r\n  new Watcher(vm, updateComponent, () => { }, true);\r\n  callHook(vm, 'mounted');\r\n}\r\n\r\nexport function lifecycleMixin (Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    const vm = this;\r\n    // vm.$el = patch(vm.$el, vnode);\r\n    const prevVnode = vm._vnode;\r\n    vm._vnode = vnode;\r\n    if (!prevVnode) {\r\n      vm.$el = patch(vm.$el, vnode);\r\n    } else {\r\n      vm.$el = patch(prevVnode, vnode);\r\n    }\r\n  }\r\n}\r\n\r\nexport function callHook (vm, hook) {\r\n  const handlers = vm.$options[ hook ];\r\n  if (handlers) {\r\n    handlers.forEach(i => i.call(vm));\r\n  }\r\n}","export function vnode (tag, data, key, children, text, componentOptions) {\r\n  return {\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n    componentOptions\r\n  }\r\n}","import { isObject } from \"../utils\";\r\nimport { vnode } from \"./vnode\";\r\n\r\nexport function createComponent (vm, tag, data, key, children, Ctor) {\r\n  if (isObject(Ctor)) {\r\n    Ctor = vm.$options._base.extend(Ctor);\r\n  }\r\n\r\n  data.hooks = {\r\n    init (vnode) {\r\n      const child = vnode.componentInstance = new Ctor({ _vnode: vnode, propsData: vnode.data, _isComponent: true })\r\n      child.$mount();\r\n    },\r\n\r\n  }\r\n  console.log('data: =====', data)\r\n  return vnode(`vue-component-${Ctor.cid}-${tag}`, data, key, undefined, undefined, { Ctor, children });\r\n}","import { isReservedTag } from \"../utils\";\r\nimport { createComponent } from \"./create-component\";\r\nimport { vnode } from \"./vnode\";\r\n\r\nexport function createElement (vm, tag, data, ...children) {\r\n\r\n  let { key } = data;\r\n  if (key) {\r\n    delete data[ key ];\r\n  }\r\n  if (isReservedTag(tag)) {\r\n    return vnode(tag, data, key, children, undefined);\r\n  } else {\r\n    let Ctor = vm.$options.components[ tag ];\r\n    return createComponent(vm, tag, data, key, children, Ctor);\r\n  }\r\n\r\n}\r\n\r\n// $createElement(\"div\", {}, $createElement(\"div\", { \"onClick\": this.handleClick.bind(this) }, $createTextNode(this.name)), $createElement(\"div\", {}, $createTextNode(this.age)))\r\n\r\n// export function createElement (vm, tag, data, ...children) {\r\n//   let { key } = data ? data : { key: undefined };\r\n//   if (key) {\r\n//     delete data[ key ];\r\n//   }\r\n\r\n//   // children = children || []\r\n//   const ch = [];\r\n//   children.forEach(child => {\r\n//     ch.append(createElement(vm, child));\r\n//   })\r\n\r\n//   console.log('ch: ', ch, tag, vm)\r\n//   if (isReservedTag(tag)) {\r\n//     return vnode(tag, data, key, ch, undefined);\r\n//   } else if (tag == null) {\r\n//     return createTextNode(vm, tag);\r\n//   } else {\r\n//     let Ctor = vm.$options.components[ tag ];\r\n//     return createComponent(vm, tag, data, key, children, Ctor);\r\n//   }\r\n// }\r\n\r\nexport function createTextNode (vm, text) {\r\n\r\n  return vnode(undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\n","import { createElement, createTextNode } from \"./vdom/create-element\";\r\nexport function renderMixin (Vue) {\r\n  // 获取VNode\r\n  // _c创建元素虚拟节点\r\n  Vue.prototype._c = function () {\r\n    return createElement(this, ...arguments);\r\n  }\r\n  // _a 创建文本虚拟节点\r\n  Vue.prototype._v = function (text) {\r\n    return createTextNode(this, text)\r\n  }\r\n  // _s JSOM.stringify();\r\n  Vue.prototype._s = function (val) {\r\n    return val == null ? '' : (typeof val === 'object' ? JSON.stringify(val) : val);\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n\r\n    const { render } = vm.$options\r\n    const vnode = render.call(vm, vm.$createElement);\r\n\r\n    return vnode;\r\n  }\r\n}\r\n\r\n\r\nexport function initRender (vm) {\r\n  vm.$createElement = (tag, data, ...children) => createElement(vm, tag, data, ...children);\r\n  vm.$createTextNode = (text) => createTextNode(vm, text);\r\n}","function oneObject(str) {\n    var obj = {}\n    str.split(\",\").forEach(_ => obj[_] = true)\n    return obj\n}\nvar voidTag = oneObject(\"area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr\")\nvar specalTag = oneObject('xmp,style,script,noscript,textarea,template,#comment')\n\nvar hiddenTag = oneObject('style,script,noscript,template')\n\nvar JSXParser = function(a, f) {\n    if (!(this instanceof JSXParser)) {\n        return parse(a, f)\n    }\n    this.input = a\n    this.getOne = f\n}\nJSXParser.prototype = {\n    parse: function() {\n        return parse(this.input, this.getOne)\n    }\n}\nvar rsp = /\\s/\n    /**\n     * \n     * \n     * @param {any} string \n     * @param {any} getOne 只返回一个节点\n     * @returns \n     */\nfunction parse(string, getOne) {\n    getOne = (getOne === void 666 || getOne === true)\n    var ret = lexer(string, getOne)\n    if (getOne) {\n        return typeof ret[0] === 'string' ? ret[1] : ret[0]\n    }\n    return ret\n}\n\nfunction lexer(string, getOne) {\n    var tokens = []\n    var breakIndex = 120\n    var stack = []\n    var origString = string\n    var origLength = string.length\n\n    stack.last = function() {\n        return stack[stack.length - 1]\n    }\n    var ret = []\n\n    function addNode(node) {\n        var p = stack.last()\n        if (p && p.children) {\n            p.children.push(node)\n        } else {\n            ret.push(node)\n        }\n    }\n\n    var lastNode\n    do {\n        if (--breakIndex === 0) {\n            break\n        }\n        var arr = getCloseTag(string)\n\n        if (arr) { //处理关闭标签\n            string = string.replace(arr[0], '')\n            const node = stack.pop()\n                //处理下面两种特殊情况：\n                //1. option会自动移除元素节点，将它们的nodeValue组成新的文本节点\n                //2. table会将没有被thead, tbody, tfoot包起来的tr或文本节点，收集到一个新的tbody元素中\n            if (node.type === 'option') {\n                node.children = [{\n                    type: '#text',\n                    nodeValue: getText(node)\n                }]\n            } else if (node.type === 'table') {\n                insertTbody(node.children)\n            }\n            lastNode = null\n            if (getOne && ret.length === 1 && !stack.length) {\n                return [origString.slice(0, origLength - string.length), ret[0]]\n            }\n            continue\n        }\n\n        var arr = getOpenTag(string)\n        if (arr) {\n            string = string.replace(arr[0], '')\n            var node = arr[1]\n            addNode(node)\n            var selfClose = !!(node.isVoidTag || specalTag[node.type])\n            if (!selfClose) { //放到这里可以添加孩子\n                stack.push(node)\n            }\n            if (getOne && selfClose && !stack.length) {\n                return [origString.slice(0, origLength - string.length), node]\n            }\n            lastNode = node\n            continue\n        }\n\n        var text = ''\n        do {\n            //处理<div><<<<<<div>的情况\n            const index = string.indexOf('<')\n            if (index === 0) {\n                text += string.slice(0, 1)\n                string = string.slice(1)\n\n            } else {\n                break\n            }\n        } while (string.length);\n        //处理<div>{aaa}</div>,<div>xxx{aaa}xxx</div>,<div>xxx</div>{aaa}sss的情况\n        const index = string.indexOf('<') //判定它后面是否存在标签\n        const bindex = string.indexOf('{') //判定它后面是否存在jsx\n        const aindex = string.indexOf('}')\n\n        let hasJSX = (bindex < aindex) && (index === -1 || bindex < index)\n        if (hasJSX) {\n            if (bindex !== 0) { // 收集jsx之前的文本节点\n                text += string.slice(0, bindex)\n                string = string.slice(bindex)\n            }\n            addText(lastNode, text, addNode)\n            string = string.slice(1) //去掉前面{\n            var arr = parseCode(string)\n            addNode(makeJSX(arr[1]))\n            lastNode = false\n            string = string.slice(arr[0].length + 1) //去掉后面的}\n        } else {\n            if (index === -1) {\n                text = string\n                string = ''\n            } else {\n                text += string.slice(0, index)\n                string = string.slice(index)\n            }\n            addText(lastNode, text, addNode)\n        }\n\n    } while (string.length);\n    return ret\n}\n\n\nfunction addText(lastNode, text, addNode) {\n    if (/\\S/.test(text)) {\n        if (lastNode && lastNode.type === '#text') {\n            lastNode.text += text\n        } else {\n            lastNode = {\n                type: '#text',\n                nodeValue: text\n            }\n            addNode(lastNode)\n        }\n    }\n}\n\n//它用于解析{}中的内容，如果遇到不匹配的}则返回, 根据标签切割里面的内容 \nfunction parseCode(string) { // <div id={ function(){<div/>} }>\n    var word = '', //用于匹配前面的单词\n        braceIndex = 1,\n        codeIndex = 0,\n        nodes = [],\n        quote,\n        escape = false,\n        state = 'code'\n    for (var i = 0, n = string.length; i < n; i++) {\n        var c = string.charAt(i),\n            next = string.charAt(i + 1)\n        switch (state) {\n            case 'code':\n                if (c === '\"' || c === \"'\") {\n                    state = 'string'\n                    quote = c\n                } else if (c === '{') {\n                    braceIndex++\n                } else if (c === '}') {\n                    braceIndex--\n                    if (braceIndex === 0) {\n                        collectJSX(string, codeIndex, i, nodes)\n                        return [string.slice(0, i), nodes]\n                    }\n                } else if (c === '<') {\n                    var word = '',\n                        empty = true ,\n                        index = i - 1\n                    do {\n                        c = string.charAt(index)\n                        if (empty && rsp.test(c)) {\n                            continue\n                        }\n                        if (rsp.test(c)) {\n                            break\n                        }\n                        empty = false\n                        word = c + word\n                        if (word.length > 7) { //性能优化\n                            break\n                        }\n                    } while (--index >= 0);\n                    var chunkString = string.slice(i)\n                    if (word === '' || /(=>|return|\\{|\\(|\\[|\\,)$/.test(word) && /\\<\\w/.test(chunkString)) {\n                        collectJSX(string, codeIndex, i, nodes)\n                        var chunk = lexer(chunkString, true)\n                        nodes.push(chunk[1])\n                        i += (chunk[0].length - 1) //因为已经包含了<, 需要减1\n                        codeIndex = i + 1\n                    }\n\n                }\n                break\n            case 'string':\n                if (c == '\\\\' && (next === '\"' || next === \"'\")) {\n                    escape = !escape\n                } else if (c === quote && !escape) {\n                    state = 'code'\n                }\n                break\n        }\n\n    }\n}\n\nfunction collectJSX(string, codeIndex, i, nodes) {\n    var nodeValue = string.slice(codeIndex, i)\n    if (/\\S/.test(nodeValue)) { //将{前面的东西放进去\n        nodes.push({\n            type: '#jsx',\n            nodeValue: nodeValue\n        })\n    }\n}\n\nvar rtbody = /^(tbody|thead|tfoot)$/\n\nfunction insertTbody(nodes) {\n    var tbody = false\n    for (var i = 0, n = nodes.length; i < n; i++) {\n        var node = nodes[i]\n        if (rtbody.test(node.nodeName)) {\n            tbody = false\n            continue\n        }\n\n        if (node.nodeName === 'tr') {\n            if (tbody) {\n                nodes.splice(i, 1)\n                tbody.children.push(node)\n                n--\n                i--\n            } else {\n                tbody = {\n                    nodeName: 'tbody',\n                    props: {},\n                    children: [node]\n                }\n                nodes.splice(i, 1, tbody)\n            }\n        } else {\n            if (tbody) {\n                nodes.splice(i, 1)\n                tbody.children.push(node)\n                n--\n                i--\n            }\n        }\n    }\n}\n\n\nfunction getCloseTag(string) {\n    if (string.indexOf(\"</\") === 0) {\n        var match = string.match(/\\<\\/(\\w+)>/)\n        if (match) {\n            var tag = match[1]\n            string = string.slice(3 + tag.length)\n            return [match[0], {\n                type: tag\n            }]\n        }\n    }\n    return null\n}\n\nfunction getOpenTag(string) {\n    if (string.indexOf(\"<\") === 0) {\n        var i = string.indexOf('<!--') //处理注释节点\n        if (i === 0) {\n            var l = string.indexOf('-->')\n            if (l === -1) {\n                thow('注释节点没有闭合 ' + string.slice(0, 100))\n            }\n            var node = {\n                type: '#comment',\n                nodeValue: string.slice(4, l)\n            }\n\n            return [string.slice(0, l + 3), node]\n        }\n        var match = string.match(/\\<(\\w[^\\s\\/\\>]*)/) //处理元素节点\n        if (match) {\n            var leftContent = match[0],\n                tag = match[1]\n            var node = {\n                type: tag,\n                props: {},\n                children: []\n            }\n\n            string = string.replace(leftContent, '') //去掉标签名(rightContent)\n            var arr = getAttrs(string) //处理属性\n            if (arr) {\n                node.props = arr[1]\n                string = string.replace(arr[0], '')\n                leftContent += arr[0]\n            }\n\n            if (string[0] === '>') { //处理开标签的边界符\n                leftContent += '>'\n                string = string.slice(1)\n                if (voidTag[node.type]) {\n                    node.isVoidTag = true\n                }\n            } else if (string.slice(0, 2) === '/>') { //处理开标签的边界符\n                leftContent += '/>'\n                string = string.slice(2)\n                node.isVoidTag = true\n            } \n\n            if (!node.isVoidTag && specalTag[tag]) { //如果是script, style, xmp等元素\n                var closeTag = '</' + tag + '>'\n                var j = string.indexOf(closeTag)\n                var nodeValue = string.slice(0, j)\n                leftContent += nodeValue + closeTag\n                node.children.push({\n                    type: '#text',\n                    nodeValue: nodeValue\n                })\n            }\n\n            return [leftContent, node]\n        }\n    }\n}\n\nfunction getText(node) {\n    var ret = ''\n    node.children.forEach(function(el) {\n        if (el.type === '#text') {\n            ret += el.nodeValue\n        } else if (el.children && !hiddenTag[el.type]) {\n            ret += getText(el)\n        }\n    })\n    return ret\n}\n\nfunction getAttrs(string) {\n    var state = 'AttrNameOrJSX',\n        attrName = '',\n        attrValue = '',\n        quote,\n        escape,\n        props = {}\n\n    for (var i = 0, n = string.length; i < n; i++) {\n        var c = string[i]\n        switch (state) {\n            case 'AttrNameOrJSX':\n                if (c === '/' || c === '>') {\n                    return [string.slice(0, i), props]\n                }\n                if (rsp.test(c)) {\n                    if (attrName) {\n                        state = 'AttrEqual'\n                    }\n                } else if (c === '=') {\n                    if (!attrName) {\n                        throw '必须指定属性名'\n                    }\n                    state = 'AttrQuoteOrJSX'\n                } else if (c === '{') {\n                    state = 'SpreadJSX'\n                } else {\n                    attrName += c\n                }\n                break\n            case 'AttrEqual':\n                if (c === '=') {\n                    state = 'AttrQuoteOrJSX'\n                }\n                break\n            case 'AttrQuoteOrJSX':\n                if (c === '\"' || c === \"'\") {\n                    quote = c\n                    state = 'AttrValue'\n                    escape = false\n                } else if (c === '{') {\n                    state = 'JSX'\n                }\n                break\n            case 'AttrValue':\n                if (c === '\\\\') {\n                    escape = !escape\n                }\n                if (c !== quote) {\n                    attrValue += c\n                } else if (c === quote && !escape) {\n                    props[attrName] = attrValue\n                    attrName = attrValue = ''\n                    state = 'AttrNameOrJSX'\n                }\n                break\n            case 'SpreadJSX':\n                i += 3\n            case 'JSX':\n\n                var arr = parseCode(string.slice(i))\n                i += arr[0].length\n\n                props[state === 'SpreadJSX' ? 'spreadAttribute' : attrName] = makeJSX(arr[1])\n                attrName = attrValue = ''\n                state = 'AttrNameOrJSX'\n                break\n        }\n    }\n    throw '必须关闭标签'\n}\n\nfunction makeJSX(JSXNode) {\n    return JSXNode.length === 1 && JSXNode[0].type === '#jsx' ? JSXNode[0] : { type: '#jsx', nodeValue: JSXNode }\n}\n\nexport default JSXParser","// //单例HTML标签,多例自定义标签\n// (function (global, factory) {\n//     typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n//         typeof define === 'function' && define.amd ? define(factory) :\n//             (global = global || self, global.Vue = factory());\n// })(this, function () {\n// var vnode = evalJSX(str, data, config)\n// config只需要一个参数，ns，默认是'anu',当你配置成'React'，就会生成 React.createElement\n// 也可以全局配置它 evalJSX.globalNs = 'React' 就会生成 React.createElement\n\nimport JSXParser from \"./jsx-parser\"\n\nvar rComponent = /^(this|[A-Z])/\nvar cacheFns = {}\nvar cacheStr = {}\n\nexport function evalJSX (str, obj, config) {\n    var jsx = new innerClass(str, config)\n    var output = jsx.init()\n    return output;\n    // console.log(output);\n    // if (!obj)\n    //     obj = {}\n    // if (typeof anu === 'function')\n    //     obj.anu = anu\n    // var args = 'var args0 = arguments[0];'\n    // for (var i in obj) {\n    //     if (i !== 'this')\n    //         args += 'var ' + i + ' = args0[\"' + i + '\"];'\n    // }\n    // args += 'return ' + output\n    // try {\n    //     var fn\n    //     if (cacheFns[ args ]) {\n    //         fn = cacheFns[ args ]\n    //     } else {\n    //         fn = cacheFns[ args ] = Function(args)\n    //     }\n    //     console.log(fn)\n    //     var a = fn.call(obj.this, obj)\n    //     return a\n    // } catch (e) {\n    //     console.log(e, args)\n    // }\n\n}\n\nfunction innerClass (str, config) {\n    config = config || {}\n    config.ns = evalJSX.globalNs || config.ns || ''\n    this.input = str\n    this.ns = config.ns\n    this.type = config.type\n}\ninnerClass.prototype = {\n    init: function () {\n\n        if (typeof JSXParser === 'function') {\n            var useCache = this.input.length < 720\n            if (useCache && cacheStr[ this.input ]) {\n                return cacheStr[ this.input ]\n            }\n            var array = (new JSXParser(this.input)).parse()\n\n\n            var evalString = this.genChildren([ array ])\n            if (useCache) {\n                return cacheStr[ this.input ] = evalString\n            }\n            return evalString\n        } else {\n            throw 'need JSXParser https://github.com/RubyLouvre/jsx-parser'\n        }\n\n    },\n    genTag: function (el) {\n        var children = this.genChildren(el.children, el)\n        var ns = this.ns\n        var type = rComponent.test(el.type) ? el.type : JSON.stringify(el.type)\n        return ns + '$createElement(' + type +\n            ',' + this.genProps(el.props, el) +\n            ',' + children + ')'\n    },\n    genProps: function (props, el) {\n\n        if (!props && !el.spreadAttribute) {\n            return 'null'\n        }\n        var ret = '{'\n        for (var i in props) {\n            ret += JSON.stringify(i) + ':' + this.genPropValue(props[ i ]) + ',\\n'\n        }\n        ret = ret.replace(/\\,\\n$/, '') + '}'\n        if (el.spreadAttribute) {\n            return 'Object.assign({},' + el.spreadAttribute + ',' + ret + ')'\n        }\n        return ret\n    },\n    genPropValue: function (val) {\n        if (typeof val === 'string') {\n            return JSON.stringify(val)\n        }\n        if (val) {\n            if (Array.isArray(val.nodeValue)) {\n                return this.genChildren(val.nodeValue)\n            }\n            if (val) {\n                return val.nodeValue\n            }\n        }\n    },\n    genChildren: function (children, obj, join) {\n        // debugger\n        if (obj) {\n\n            if (obj.isVoidTag || !obj.children.length) {\n                return 'null'\n            }\n        }\n        var ret = []\n        for (var i = 0, el; el = children[ i++ ];) {\n            if (el.type === '#jsx') {\n\n                if (Array.isArray(el.nodeValue)) {\n                    ret[ ret.length ] = this.genChildren(el.nodeValue, null, ' ')\n                } else {\n                    ret[ ret.length ] = `$createTextNode(${el.nodeValue})`\n                }\n            } else if (el.type === '#text') {\n                ret[ ret.length ] = JSON.stringify(el.nodeValue)\n            } else if (el) {\n                ret[ ret.length ] = this.genTag(el)\n            }\n        }\n        console.log('ret', ret)\n        return ret.join(join || ',')\n    }\n\n}\n// return evalJSX;\n// }\n// });","import { initState } from \"./state\"\r\nimport { compileToFunction } from \"./compiler/index\";\r\nimport { callHook, mountComponent } from \"./lifecycle\"\r\nimport { initGlobalAPI } from \"./global-api/index\"\r\nimport { mergeOptions } from \"./utils\";\r\nimport { nextTick } from \"../utils/next-tick\";\r\nimport { Watcher } from \"./observer/watcher\";\r\nimport { initRender } from \"./render\";\r\nimport { evalJSX } from \"./compiler/evalJSX\";\r\n\r\n\r\nexport function initMixin (Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    //Vue的内部属性#options 用户传递所以参数\r\n    const vm = this;\r\n    // console.log(vm.constructor.options, options)\r\n    vm.$options = mergeOptions(vm.constructor.options, options);\r\n    // console.log('opt', vm.$options)\r\n    console.log('options: -------', vm.$options);\r\n    callHook(vm, 'beforeCreate');\r\n    initRender(vm);\r\n    initState(vm); // 初始化状态\r\n    callHook(vm, 'created');\r\n\r\n    // 通过模板渲染\r\n\r\n    if (vm.$options.el) { // 用户提供挂载节点\r\n      vm.$mount(vm.$options.el);\r\n    }\r\n  }\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    el = document.querySelector(el);\r\n    const vm = this;\r\n    // 同时存在template与render使用render，如果没有则使用id=“app”的模板\r\n    // 将template转换为render函数挂载到opts上\r\n    const opts = this.$options;\r\n\r\n    if (!opts.render) { // 如果没有render，则编译模板\r\n      let template = opts.template;\r\n      // console.log('opts---', opts);\r\n      if (!template && el) {\r\n        template = el.outerHTML;\r\n      }\r\n      // const render = compileToFunction(template);\r\n      console.log(this.createElement);\r\n      const render = new Function(`with(this){return ${evalJSX(template, { this: this })}}`)\r\n      opts.render = render;\r\n    }\r\n    //  opts.render;\r\n    mountComponent(vm, el);\r\n  }\r\n\r\n  Vue.prototype.$nextTick = nextTick;\r\n\r\n  Vue.prototype.$watch = function (expOrFn, cb, options = {}) {\r\n    const vm = this;\r\n    options.immediate = options.immediate ? options.immediate : true;\r\n    options.user = true;\r\n    const watcher = new Watcher(vm, expOrFn, cb, options)\r\n    if (options.immediate) {\r\n      try {\r\n        cb.call(vm, watcher.value)\r\n      } catch (error) {\r\n        handleError(error, vm, `callback for immediate watcher \"${watcher.expression}\"`)\r\n      }\r\n    }\r\n  };\r\n}","import { initGlobalAPI } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\"\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { renderMixin } from \"./render\";\r\nimport { stateMixin } from \"./state\";\r\n\r\nfunction Vue (options) {\r\n  // 初始化操作\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\nlifecycleMixin(Vue);\r\nrenderMixin(Vue);\r\ninitGlobalAPI(Vue);\r\nstateMixin(Vue);\r\n\r\n\r\n\r\nexport default Vue;"],"names":["callbacks","pending","p","Promise","resolve","flushCallbacks","copies","slice","length","forEach","timerFunc","then","nextTick","cb","ctx","_resolve","push","call","LIFECYCLE_HOOKS","ASSET_TYPES","initAssetRegisters","Vue","type","id","definition","options","_base","extend","isObject","data","proxy","vm","source","key","Object","defineProperty","get","set","newValue","strategy","hook","mergeHook","parentVal","childVal","concat","res","create","mergeOptions","parent","child","mergeField","hasOwnProperty","isReservedTag","tag","str","obj","split","initExtend","extendOptions","cid","Sub","VueComponent","_init","prototype","constructor","initMixin","mixin","initGlobalAPI","oldArrayMethods","Array","methods","arrayMethods","method","args","ret","apply","ob","__ob__","inserted","observeArray","uid","Dep","subs","sub","target","addDep","watcher","update","targetStack","pushTarget","popTarget","pop","Observer","value","enumerable","configurable","isArray","__proto__","walk","keys","defineReactive","i","observe","dep","depend","notify","has","queue","flushSchedulerQueue","run","queueWatcher","Watcher","exprOrFn","user","lazy","dirty","getter","path","undefined","addSub","newVal","oldVal","console","log","initState","opts","$options","props","initProps","initData","initMethods","watch","initWatch","computed","initComputed","watchers","_computedWatchers","userDef","defineComputed","sharedPropertyDefinition","createComputedGetter","computedGetter","evaluate","_data","propsOptions","propsData","_props","$props","_propKeys","porps","bind","handler","h","createWatcher","expOrFn","$watch","stateMixin","dataDef","propsDef","sameVnode","a","b","createKeyToOldIdx","children","beginIdx","endIdx","map","patch","oldVnode","vnode","createElm","isRealElement","nodeType","oldElm","parentElm","parentNode","el","insertBefore","removeChild","replaceChild","text","textContent","updatePrototies","oldChildren","newChildren","updateChildren","appendChild","innerHTML","oldKeyToIdx","oldStartIndex","oldStartVnode","oldEndIndex","oldEndVnode","newStartIndex","newStartVnode","newEndIndex","newEndVnode","nextSibling","idxInOld","vnodeToMove","createComponent","componentInstance","$el","document","createElement","createTextNode","d","hooks","init","newProps","oldProps","oldStyle","style","newStyle","removeAttribute","styleName","trim","className","startsWith","event","toLowerCase","setAttribute","mountComponent","callHook","updateComponent","_update","_render","lifecycleMixin","prevVnode","_vnode","handlers","componentOptions","Ctor","_isComponent","$mount","components","renderMixin","_c","arguments","_v","_s","val","JSON","stringify","render","$createElement","initRender","$createTextNode","oneObject","_","voidTag","specalTag","hiddenTag","JSXParser","f","parse","input","getOne","rsp","string","lexer","breakIndex","stack","origString","origLength","last","addNode","node","lastNode","arr","getCloseTag","replace","nodeValue","getText","insertTbody","getOpenTag","selfClose","isVoidTag","index","indexOf","bindex","aindex","hasJSX","addText","parseCode","makeJSX","test","word","braceIndex","codeIndex","nodes","quote","escape","state","n","c","charAt","next","collectJSX","empty","chunkString","chunk","rtbody","tbody","nodeName","splice","match","l","thow","leftContent","getAttrs","closeTag","j","attrName","attrValue","JSXNode","rComponent","cacheStr","evalJSX","config","jsx","innerClass","output","ns","globalNs","useCache","array","evalString","genChildren","genTag","genProps","spreadAttribute","genPropValue","join","querySelector","template","outerHTML","Function","$nextTick","immediate","error","handleError","expression"],"mappings":"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"}